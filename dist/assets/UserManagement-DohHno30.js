import{k as ue,r as p,j as e,l as be,m as We,n as Oe,o as ce,W as je,G as Ne,p as de,L as ne,B as y,A as Ue,C as G,e as V,T as ze,s as x,t as m,q as He,v as Ke,w as T,U as Ge,I as ee,S as Le,x as Te,y as Me,z as Be,D as re,E as se,F as Ve,X as Ye,H as Xe,J as Ze,K as Je,M as Qe,N as es}from"./index-DBZ0Cn5g.js";import{D as ss}from"./DataTable-uFCT-Q5Q.js";import{A as ye,a as we,b as ve,c as _e,d as ke,e as Ie}from"./AdminDialog-gp6nPL82.js";import{getAdminOpcode as ts,isMultipleOpcode as as}from"./opcodeHelper--nsctERE.js";import{C as Se}from"./clock-C3RDg2t7.js";import{T as rs}from"./target-e0XJb-Ry.js";import{T as ns}from"./triangle-alert-lvF-16NF.js";import{T as ls}from"./trophy-npCexO9y.js";import{C as os}from"./chart-column-CoIX4t4G.js";import{M as me}from"./MetricCard-Cj1Etvsa.js";import{F as is}from"./ForceTransactionModal-BVA_x6EH.js";import{P as cs}from"./plus-Brv5fLBj.js";import{S as ds}from"./search-DBLVvwNz.js";import{F as ms}from"./funnel-xMIbzAW9.js";import{T as Fe}from"./trash-2-oFwyE4O4.js";import{D as qe}from"./dollar-sign-eVuSTzYT.js";import"./textarea-B2eSiypl.js";import"./popover-Drn2cjh1.js";import"./command-Bi-vmF70.js";import"./dialog-DrUif41K.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=[["path",{d:"M12 17V3",key:"1cwfxf"}],["path",{d:"m6 11 6 6 6-6",key:"12ii2o"}],["path",{d:"M19 21H5",key:"150jfl"}]],us=ue("arrow-down-to-line",xs);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],xe=ue("brain",ps);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],Pe=ue("user-check",hs);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],Ee=ue("user-x",fs);function gs({user:l,isOpen:_,onClose:H}){const[M,A]=p.useState("basic"),[h,k]=p.useState(!1),[R,C]=p.useState([]),[le,te]=p.useState([]),[N,oe]=p.useState(null),[f,pe]=p.useState({totalDeposit:0,totalWithdraw:0,totalBets:0,totalWinAmount:0,accountAge:0,lastActivity:""}),W=async()=>{try{k(!0);const{data:t}=await x.from("transactions").select("transaction_type, amount, status").eq("user_id",l.id),i=(t||[]).filter(d=>d.transaction_type==="deposit"&&d.status==="approved").reduce((d,u)=>d+(u.amount||0),0),L=(t||[]).filter(d=>d.transaction_type==="withdrawal"&&d.status==="approved").reduce((d,u)=>d+(u.amount||0),0),{data:B}=await x.from("game_records").select("bet_amount, win_amount").eq("user_id",l.id),F=(B||[]).reduce((d,u)=>d+(u.bet_amount||0),0),Z=(B||[]).reduce((d,u)=>d+(u.win_amount||0),0),O=Math.floor((Date.now()-new Date(l.created_at).getTime())/(1e3*60*60*24)),{data:$}=await x.from("game_launch_sessions").select("launched_at").eq("user_id",l.id).order("launched_at",{ascending:!1}).limit(1).single();pe({totalDeposit:i,totalWithdraw:L,totalBets:F,totalWinAmount:Z,accountAge:O,lastActivity:$?.launched_at||l.created_at})}catch(t){console.error("í†µê³„ ê³„ì‚° ì˜¤ë¥˜:",t)}finally{k(!1)}},he=async()=>{try{k(!0);const{data:t,error:i}=await x.from("transactions").select("*").eq("user_id",l.id).order("created_at",{ascending:!1}).limit(50);if(i)throw i;C(t||[])}catch(t){console.error("ì…ì¶œê¸ˆ ë‚´ì—­ ì¡°íšŒ ì˜¤ë¥˜:",t),m.error("ì…ì¶œê¸ˆ ë‚´ì—­ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}finally{k(!1)}},ie=async()=>{try{k(!0);const{data:t,error:i}=await x.from("game_records").select("*").eq("user_id",l.id).order("played_at",{ascending:!1}).limit(100);if(i)throw i;te(t||[])}catch(t){console.error("ë² íŒ… ë‚´ì—­ ì¡°íšŒ ì˜¤ë¥˜:",t),m.error("ë² íŒ… ë‚´ì—­ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}finally{k(!1)}},fe=async()=>{try{k(!0);const{data:t}=await x.from("game_records").select("*").eq("user_id",l.id).order("played_at",{ascending:!1}).limit(500);if(!t||t.length===0){oe(null);return}const i=new Map;t.forEach(n=>{const g=`${n.game_id}_${n.game_title||""}`;i.has(g)||i.set(g,{gameName:n.game_title||`ê²Œì„ ${n.game_id}`,providerName:n.provider_name||"",count:0,totalBet:0,totalWin:0,wins:0});const J=i.get(g);J.count++,J.totalBet+=n.bet_amount||0,J.totalWin+=n.win_amount||0,(n.win_amount||0)>(n.bet_amount||0)&&J.wins++});const L=Array.from(i.values()).sort((n,g)=>g.count-n.count).slice(0,5).map(n=>({game:n.gameName,provider:n.providerName,count:n.count,winRate:n.count>0?n.wins/n.count*100:0,netProfit:n.totalWin-n.totalBet})),B=new Array(24).fill(0);t.forEach(n=>{const g=new Date(n.played_at).getHours();B[g]++});const F=B.indexOf(Math.max(...B)),O=(B.slice(22).reduce((n,g)=>n+g,0)+B.slice(0,6).reduce((n,g)=>n+g,0))/t.length*100,$=t.map(n=>n.bet_amount||0),d=$.reduce((n,g)=>n+g,0)/t.length,u=Math.max(...$),q=Math.min(...$.filter(n=>n>0)),P=t.reduce((n,g)=>n+(g.bet_amount||0),0),E=t.reduce((n,g)=>n+(g.win_amount||0),0)-P,U=t.filter(n=>(n.win_amount||0)>(n.bet_amount||0)).length/t.length*100;let D=0;d>1e5?D+=3:d>5e4?D+=2:d>1e4&&(D+=1),u>5e5?D+=3:u>2e5?D+=2:u>5e4&&(D+=1),E<-1e6?D+=3:E<-5e5?D+=2:E<-1e5&&(D+=1),t.length>500&&(D+=1);const ae=D>=6?"HIGH":D>=3?"MEDIUM":"LOW",S=[];if(L.length>0){const n=L[0],g=(n.count/t.length*100).toFixed(1);S.push(`ğŸ’ ê°€ì¥ ì„ í˜¸í•˜ëŠ” ê²Œì„ì€ "${n.game}"ë¡œ, ì „ì²´ í”Œë ˆì´ì˜ ${g}%ë¥¼ ì°¨ì§€í•©ë‹ˆë‹¤.`),n.winRate>60?S.push(`âœ… "${n.game}"ì—ì„œ ${n.winRate.toFixed(1)}%ì˜ ë†’ì€ ìŠ¹ë¥ ì„ ê¸°ë¡ ì¤‘ì…ë‹ˆë‹¤.`):n.winRate<40&&S.push(`âš ï¸ "${n.game}"ì—ì„œ ${n.winRate.toFixed(1)}%ì˜ ë‚®ì€ ìŠ¹ë¥ ë¡œ, ì „ëµ ê°œì„ ì´ í•„ìš”í•©ë‹ˆë‹¤.`)}S.push(`ğŸ• ì£¼ë¡œ ${F}ì‹œì— ê°€ì¥ í™œë°œí•œ í™œë™ì„ ë³´ì…ë‹ˆë‹¤.`),O>40&&S.push(`ğŸŒ™ ì•¼ê°„ ì‹œê°„ëŒ€(22ì‹œ~6ì‹œ) í”Œë ˆì´ ë¹„ìœ¨ì´ ${O.toFixed(1)}%ë¡œ ë†’ìŠµë‹ˆë‹¤.`),U>55?S.push(`ğŸ“ˆ ì „ì²´ ìŠ¹ë¥  ${U.toFixed(1)}%ë¡œ í‰ê·  ì´ìƒì˜ ìš°ìˆ˜í•œ ì„±ê³¼ë¥¼ ë³´ì…ë‹ˆë‹¤.`):U<45?S.push(`ğŸ“‰ ì „ì²´ ìŠ¹ë¥  ${U.toFixed(1)}%ë¡œ ê²Œì„ ì „ëµ ì¬ê²€í† ê°€ í•„ìš”í•©ë‹ˆë‹¤.`):S.push(`ğŸ“Š ì „ì²´ ìŠ¹ë¥  ${U.toFixed(1)}%ë¡œ í‰ê· ì ì¸ ìˆ˜ì¤€ì…ë‹ˆë‹¤.`),E>0?S.push(`ğŸ’° ì´ ${Math.abs(E).toLocaleString()}ì›ì˜ ìˆ˜ìµì„ ë‹¬ì„±í–ˆìŠµë‹ˆë‹¤.`):S.push(`ğŸ’¸ ì´ ${Math.abs(E).toLocaleString()}ì›ì˜ ì†ì‹¤ì´ ë°œìƒí–ˆìŠµë‹ˆë‹¤.`),d>5e4&&S.push(`âš¡ í‰ê·  ë² íŒ…ì•¡ì´ ${d.toLocaleString()}ì›ìœ¼ë¡œ ê³ ì•¡ ë² íŒ… ì„±í–¥ì…ë‹ˆë‹¤.`),u/d>10&&S.push("ğŸ“Š ë² íŒ… ê¸ˆì•¡ ë³€ë™ì„±ì´ ë†’ì•„ ì¼ê´€ëœ ë² íŒ… ì „ëµì´ í•„ìš”í•©ë‹ˆë‹¤.");let z="";ae==="HIGH"?z="ê³µê²©ì  ê³ ìœ„í—˜ í”Œë ˆì´ì–´":ae==="MEDIUM"?U>50?z="ì ê·¹ì  ì•ˆì •í˜• í”Œë ˆì´ì–´":z="ë„ì „ì  ì¤‘ìœ„í—˜ í”Œë ˆì´ì–´":d<1e4?z="ë³´ìˆ˜ì  ì €ìœ„í—˜ í”Œë ˆì´ì–´":z="ì‹ ì¤‘í•œ ì•ˆì •í˜• í”Œë ˆì´ì–´",oe({topGames:L,peakHour:F,nightPlayRatio:O,avgBet:d,maxBet:u,minBet:q,totalBets:t.length,winRate:U,netProfit:E,riskLevel:ae,userType:z,insights:S})}catch(t){console.error("íŒ¨í„´ ë¶„ì„ ì˜¤ë¥˜:",t),m.error("íŒ¨í„´ ë¶„ì„ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}finally{k(!1)}};p.useEffect(()=>{!_||!l||(M==="basic"?W():M==="transactions"?he():M==="betting"?ie():M==="pattern"&&fe())},[M,_,l]);const w=t=>`â‚©${t.toLocaleString()}`,ge=t=>{const i=new Date(t),L=i.getFullYear(),B=String(i.getMonth()+1).padStart(2,"0"),F=String(i.getDate()).padStart(2,"0");return`${L}/${B}/${F}`},Y=t=>new Date(t).toLocaleString("ko-KR"),X=t=>{switch(t){case"approved":case"completed":return e.jsx(y,{className:"bg-green-500/20 text-green-400 border-green-500/30",children:"ìŠ¹ì¸"});case"pending":return e.jsx(y,{className:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30",children:"ëŒ€ê¸°"});case"rejected":return e.jsx(y,{className:"bg-red-500/20 text-red-400 border-red-500/30",children:"ê±°ì ˆ"});default:return e.jsx(y,{children:t})}};return l?e.jsx(ye,{open:_,onOpenChange:H,children:e.jsxs(we,{className:"max-w-[95vw] w-[1400px] max-h-[90vh] overflow-hidden glass-card",children:[e.jsxs(ve,{className:"pb-4 border-b border-white/10",children:[e.jsxs(_e,{className:"flex items-center gap-4 text-xl",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center",children:e.jsx(be,{className:"h-6 w-6 text-white"})}),e.jsx("div",{className:"flex flex-col gap-1",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl font-bold",children:l.nickname}),e.jsxs("span",{className:"text-lg text-muted-foreground",children:["(",l.username,")"]})]})})]}),e.jsx(ke,{className:"text-base pl-16",children:"íšŒì›ì˜ ìƒì„¸ ì •ë³´ì™€ í™œë™ íŒ¨í„´ì„ í™•ì¸í•©ë‹ˆë‹¤."})]}),e.jsxs(We,{value:M,onValueChange:A,className:"w-full mt-2",children:[e.jsxs(Oe,{className:"grid w-full grid-cols-4 glass-card h-12",children:[e.jsxs(ce,{value:"basic",className:"flex items-center gap-2 text-base",children:[e.jsx(be,{className:"h-5 w-5"}),"ê¸°ë³¸ì •ë³´"]}),e.jsxs(ce,{value:"transactions",className:"flex items-center gap-2 text-base",children:[e.jsx(je,{className:"h-5 w-5"}),"ì…ì¶œê¸ˆë‚´ì—­"]}),e.jsxs(ce,{value:"betting",className:"flex items-center gap-2 text-base",children:[e.jsx(Ne,{className:"h-5 w-5"}),"ë² íŒ…ë‚´ì—­"]}),e.jsxs(ce,{value:"pattern",className:"flex items-center gap-2 text-base",children:[e.jsx(xe,{className:"h-5 w-5"}),"AI ê²Œì„íŒ¨í„´"]})]}),e.jsx(de,{value:"basic",className:"space-y-6 max-h-[calc(90vh-240px)] overflow-y-auto pr-2 pt-4",children:h?e.jsx(ne,{}):e.jsxs("div",{className:"glass-card p-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(be,{className:"h-5 w-5 text-blue-400"}),e.jsx("h3",{className:"font-semibold",children:"íšŒì› ì •ë³´"})]}),e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"ì•„ì´ë””"}),e.jsx("span",{className:"font-mono",children:l.username})]}),e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"ë‹‰ë„¤ì„"}),e.jsx("span",{children:l.nickname})]}),e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"ìƒíƒœ"}),l.status==="active"?e.jsx(y,{className:"bg-green-500/20 text-green-400",children:"í™œì„±"}):l.status==="suspended"?e.jsx(y,{className:"bg-red-500/20 text-red-400",children:"ì •ì§€"}):e.jsx(y,{className:"bg-gray-500/20",children:"ëŒ€ê¸°"})]}),e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"ê°€ì…ì¼"}),e.jsx("span",{children:ge(l.created_at)})]}),e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"ê°€ì…ê¸°ê°„"}),e.jsxs("span",{children:[f.accountAge,"ì¼"]})]}),e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"ì˜¨ë¼ì¸"}),l.is_online?e.jsx(y,{className:"bg-green-500/20 text-green-400",children:"ì ‘ì†ì¤‘"}):e.jsx(y,{className:"bg-gray-500/20",children:"ì˜¤í”„ë¼ì¸"})]})]}),e.jsx("div",{className:"border-t border-white/10 my-6"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(je,{className:"h-5 w-5 text-emerald-400"}),e.jsx("h3",{className:"font-semibold",children:"ì”ê³  ì •ë³´"})]}),e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"ë³´ìœ ê¸ˆ"}),e.jsx("span",{className:"font-mono font-semibold",children:w(l.balance||0)})]}),e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"í¬ì¸íŠ¸"}),e.jsx("span",{className:"font-mono",children:w(l.points||0)})]}),e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"ì´ ì…ê¸ˆ"}),e.jsx("span",{className:"font-mono text-blue-400",children:w(f.totalDeposit)})]}),e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"ì´ ì¶œê¸ˆ"}),e.jsx("span",{className:"font-mono text-pink-400",children:w(f.totalWithdraw)})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-t border-white/10 pt-3 mt-2",children:[e.jsx("span",{className:"text-muted-foreground font-semibold",children:"ìˆœ ì…ì¶œê¸ˆ"}),e.jsx("span",{className:`font-mono font-semibold ${f.totalDeposit-f.totalWithdraw>=0?"text-green-400":"text-red-400"}`,children:w(f.totalDeposit-f.totalWithdraw)})]})]}),e.jsx("div",{className:"border-t border-white/10 my-6"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Ue,{className:"h-5 w-5 text-amber-400"}),e.jsx("h3",{className:"font-semibold",children:"ë² íŒ… í†µê³„"})]}),e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"ì´ ë² íŒ…ì•¡"}),e.jsx("span",{className:"font-mono",children:w(f.totalBets)})]}),e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"ì´ ë‹¹ì²¨ì•¡"}),e.jsx("span",{className:"font-mono",children:w(f.totalWinAmount)})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-t border-white/10 pt-3 mt-2",children:[e.jsx("span",{className:"text-muted-foreground font-semibold",children:"ì†ìµ"}),e.jsxs("span",{className:`font-mono font-semibold ${f.totalWinAmount-f.totalBets>=0?"text-green-400":"text-red-400"}`,children:[f.totalWinAmount-f.totalBets>=0?"+":"",w(f.totalWinAmount-f.totalBets)]})]})]}),e.jsx("div",{className:"border-t border-white/10 my-6"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Se,{className:"h-5 w-5 text-purple-400"}),e.jsx("h3",{className:"font-semibold",children:"í™œë™ ì •ë³´"})]}),e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"ìµœê·¼ í™œë™"}),e.jsx("span",{children:Y(f.lastActivity)})]})]})]})}),e.jsx(de,{value:"transactions",className:"space-y-4 max-h-[calc(90vh-240px)] overflow-y-auto pr-2 pt-4",children:h?e.jsx(ne,{}):R.length===0?e.jsxs("div",{className:"text-center py-20 glass-card rounded-xl",children:[e.jsx(je,{className:"h-20 w-20 text-muted-foreground mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-muted-foreground text-lg",children:"ì…ì¶œê¸ˆ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤."})]}):e.jsx("div",{className:"space-y-3",children:R.map(t=>e.jsx(G,{className:"glass-card hover:bg-white/5 transition-colors",children:e.jsx(V,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-5",children:[e.jsx("div",{className:`p-4 rounded-xl ${t.transaction_type==="deposit"?"bg-green-500/20":"bg-red-500/20"}`,children:t.transaction_type==="deposit"?e.jsx(ze,{className:"h-6 w-6 text-green-400"}):e.jsx(us,{className:"h-6 w-6 text-red-400"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"font-bold text-lg",children:t.transaction_type==="deposit"?"ì…ê¸ˆ":"ì¶œê¸ˆ"}),X(t.status)]}),e.jsx("p",{className:"text-base text-muted-foreground",children:Y(t.created_at)}),t.notes&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:t.notes})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:`text-2xl font-mono font-bold ${t.transaction_type==="deposit"?"text-green-400":"text-red-400"}`,children:[t.transaction_type==="deposit"?"+":"-",w(t.amount)]})})]})})},t.id))})}),e.jsx(de,{value:"betting",className:"space-y-4 max-h-[calc(90vh-240px)] overflow-y-auto pr-2 pt-4",children:h?e.jsx(ne,{}):le.length===0?e.jsxs("div",{className:"text-center py-20 glass-card rounded-xl",children:[e.jsx(Ne,{className:"h-20 w-20 text-muted-foreground mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-muted-foreground text-lg",children:"ë² íŒ… ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤."})]}):e.jsx("div",{className:"space-y-3",children:le.map(t=>{const i=(t.win_amount||0)>(t.bet_amount||0),L=(t.win_amount||0)-(t.bet_amount||0);return e.jsx(G,{className:"glass-card hover:bg-white/5 transition-colors",children:e.jsx(V,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-5",children:[e.jsx("div",{className:`p-4 rounded-xl ${i?"bg-green-500/20":"bg-red-500/20"}`,children:e.jsx(Ne,{className:`h-6 w-6 ${i?"text-green-400":"text-red-400"}`})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-bold text-lg",children:t.game_title||`ê²Œì„ ID: ${t.game_id}`}),e.jsx("p",{className:"text-base text-muted-foreground",children:t.provider_name||`í”„ë¡œë°”ì´ë” ${t.provider_id}`}),e.jsx("p",{className:"text-sm text-muted-foreground",children:Y(t.played_at)})]})]}),e.jsxs("div",{className:"text-right space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3 justify-end",children:[e.jsx("span",{className:"text-base text-muted-foreground",children:"ë² íŒ…"}),e.jsx("span",{className:"font-mono text-base",children:w(t.bet_amount||0)})]}),e.jsxs("div",{className:"flex items-center gap-3 justify-end",children:[e.jsx("span",{className:"text-base text-muted-foreground",children:"ë‹¹ì²¨"}),e.jsx("span",{className:"font-mono text-base",children:w(t.win_amount||0)})]}),e.jsxs("div",{className:`font-mono font-bold text-2xl ${i?"text-green-400":"text-red-400"}`,children:[L>=0?"+":"",w(L)]})]})]})})},t.id)})})}),e.jsx(de,{value:"pattern",className:"space-y-5 max-h-[calc(90vh-240px)] overflow-y-auto pr-2 pt-4",children:h?e.jsx(ne,{}):N?e.jsxs("div",{className:"grid gap-5",children:[e.jsxs("div",{className:"grid gap-5 md:grid-cols-2",children:[e.jsx(G,{className:"glass-card metric-gradient-purple",children:e.jsxs(V,{className:"pt-8 pb-8 px-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(rs,{className:"h-6 w-6 text-white"}),e.jsx("h3",{className:"text-xl font-bold text-white",children:"ì‚¬ìš©ì ì„±í–¥"})]}),e.jsx("p",{className:"text-3xl font-bold text-white mb-3",children:N.userType}),e.jsx("p",{className:"text-base text-white/80",children:"ë² íŒ… íŒ¨í„´ê³¼ ê¸ˆì•¡ì„ ì¢…í•© ë¶„ì„í•œ ê²°ê³¼ì…ë‹ˆë‹¤."})]})}),e.jsx(G,{className:"glass-card",children:e.jsxs(V,{className:"pt-8 pb-8 px-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(ns,{className:"h-6 w-6 text-yellow-400"}),e.jsx("h3",{className:"text-xl font-bold",children:"ë¦¬ìŠ¤í¬ ë¶„ì„"})]}),e.jsx("div",{className:"flex items-center gap-4 mb-4",children:e.jsx(y,{className:`text-xl px-5 py-2 ${N.riskLevel==="HIGH"?"bg-red-500/20 text-red-400 border-red-500/30":N.riskLevel==="MEDIUM"?"bg-yellow-500/20 text-yellow-400 border-yellow-500/30":"bg-green-500/20 text-green-400 border-green-500/30"}`,children:N.riskLevel==="HIGH"?"ê³ ìœ„í—˜":N.riskLevel==="MEDIUM"?"ì¤‘ìœ„í—˜":"ì €ìœ„í—˜"})}),e.jsxs("div",{className:"text-base text-muted-foreground",children:["í‰ê·  ë² íŒ…: ",e.jsx("span",{className:"font-mono font-semibold",children:w(N.avgBet)})]})]})})]}),e.jsx(G,{className:"glass-card",children:e.jsxs(V,{className:"pt-8 pb-8 px-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6 pb-4 border-b border-white/10",children:[e.jsx(ls,{className:"h-6 w-6 text-yellow-400"}),e.jsx("h3",{className:"text-xl font-bold",children:"ì„ í˜¸ ê²Œì„ TOP 5"})]}),e.jsx("div",{className:"space-y-3",children:N.topGames.map((t,i)=>e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-white/5 hover:bg-white/10 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(y,{className:"bg-blue-500/20 text-blue-400 border-blue-500/30 text-lg px-3 py-1",children:i+1}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-lg",children:t.game}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.provider})]})]}),e.jsxs("div",{className:"text-right space-y-1",children:[e.jsxs("p",{className:"font-mono text-base font-semibold",children:[t.count,"íšŒ"]}),e.jsxs("p",{className:`text-base font-semibold ${t.winRate>50?"text-green-400":"text-red-400"}`,children:["ìŠ¹ë¥  ",t.winRate.toFixed(1),"%"]})]})]},i))})]})}),e.jsx(G,{className:"glass-card",children:e.jsxs(V,{className:"pt-8 pb-8 px-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6 pb-4 border-b border-white/10",children:[e.jsx(os,{className:"h-6 w-6 text-cyan-400"}),e.jsx("h3",{className:"text-xl font-bold",children:"ë² íŒ… í†µê³„"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-base text-muted-foreground",children:"ì´ ë² íŒ… íšŸìˆ˜"}),e.jsxs("p",{className:"text-2xl font-mono font-bold",children:[N.totalBets,"íšŒ"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-base text-muted-foreground",children:"í‰ê·  ë² íŒ…ì•¡"}),e.jsx("p",{className:"text-2xl font-mono font-bold",children:w(N.avgBet)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-base text-muted-foreground",children:"ìŠ¹ë¥ "}),e.jsxs("p",{className:`text-2xl font-mono font-bold ${N.winRate>50?"text-green-400":"text-red-400"}`,children:[N.winRate.toFixed(1),"%"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-base text-muted-foreground",children:"ì´ ì†ìµ"}),e.jsxs("p",{className:`text-2xl font-mono font-bold ${N.netProfit>=0?"text-green-400":"text-red-400"}`,children:[N.netProfit>=0?"+":"",w(N.netProfit)]})]})]})]})}),e.jsx(G,{className:"glass-card",children:e.jsxs(V,{className:"pt-8 pb-8 px-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6 pb-4 border-b border-white/10",children:[e.jsx(xe,{className:"h-6 w-6 text-purple-400"}),e.jsx("h3",{className:"text-xl font-bold",children:"AI ë¶„ì„ ì¸ì‚¬ì´íŠ¸"})]}),e.jsx("div",{className:"space-y-3",children:N.insights.map((t,i)=>e.jsxs("div",{className:"flex items-start gap-4 p-4 rounded-xl bg-purple-500/10 border border-purple-500/20 hover:bg-purple-500/15 transition-colors",children:[e.jsx(xe,{className:"h-5 w-5 text-purple-400 mt-1 flex-shrink-0"}),e.jsx("p",{className:"text-base leading-relaxed",children:t})]},i))})]})}),e.jsx(G,{className:"glass-card",children:e.jsxs(V,{className:"pt-8 pb-8 px-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6 pb-4 border-b border-white/10",children:[e.jsx(Se,{className:"h-6 w-6 text-orange-400"}),e.jsx("h3",{className:"text-xl font-bold",children:"í™œë™ ì‹œê°„ íŒ¨í„´"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-white/5 hover:bg-white/10 transition-colors",children:[e.jsx("span",{className:"text-base text-muted-foreground",children:"í”¼í¬ ì‹œê°„ëŒ€"}),e.jsxs("span",{className:"font-bold text-2xl",children:[N.peakHour,"ì‹œ"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-white/5 hover:bg-white/10 transition-colors",children:[e.jsx("span",{className:"text-base text-muted-foreground",children:"ì•¼ê°„ í™œë™ ë¹„ìœ¨"}),e.jsxs("span",{className:"font-bold text-2xl",children:[N.nightPlayRatio.toFixed(1),"%"]})]})]})]})})]}):e.jsxs("div",{className:"text-center py-20 glass-card rounded-xl",children:[e.jsx(xe,{className:"h-20 w-20 text-muted-foreground mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-muted-foreground text-lg mb-4",children:"ë¶„ì„í•  ë² íŒ… ë°ì´í„°ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤."})]})})]})]})}):null}const bs={1:"ì‹œìŠ¤í…œê´€ë¦¬ì",2:"ëŒ€ë³¸ì‚¬",3:"ë³¸ì‚¬",4:"ë¶€ë³¸ì‚¬",5:"ì´íŒ",6:"ë§¤ì¥",7:"ì‚¬ìš©ì"};function js(){const{authState:l}=He(),[_,H]=p.useState(null),[M,A]=p.useState(!0);return p.useEffect(()=>{(async()=>{if(!l.user?.id){A(!1);return}try{const{data:k,error:R}=await x.from("partners").select("level").eq("id",l.user.id).maybeSingle();R?(console.error("ì‚¬ìš©ì ë ˆë²¨ í™•ì¸ ì˜¤ë¥˜:",R),H(null)):k?H(k.level||null):(console.log("íŒŒíŠ¸ë„ˆê°€ ì•„ë‹™ë‹ˆë‹¤. ì¼ë°˜ ì‚¬ìš©ìë¡œ íŒë‹¨í•©ë‹ˆë‹¤."),H(7))}catch(k){console.error("ì‚¬ìš©ì ë ˆë²¨ í™•ì¸ ì‹¤íŒ¨:",k),H(null)}finally{A(!1)}})()},[l.user?.id]),{userLevel:_,loading:M,isSystemAdmin:_===1,canManageUsers:_&&_<=6,getLevelName:h=>bs[h]||"ì•Œ ìˆ˜ ì—†ìŒ"}}const Ns=["KBêµ­ë¯¼ì€í–‰","ì‹ í•œì€í–‰","ìš°ë¦¬ì€í–‰","í•˜ë‚˜ì€í–‰","ë†í˜‘ì€í–‰","IBKê¸°ì—…ì€í–‰","ë¶€ì‚°ì€í–‰","ëŒ€êµ¬ì€í–‰","ê´‘ì£¼ì€í–‰","ì „ë¶ì€í–‰","ê²½ë‚¨ì€í–‰","ì œì£¼ì€í–‰","SCì œì¼ì€í–‰","HSBCì€í–‰","KDBì‚°ì—…ì€í–‰","NHë†í˜‘ì€í–‰","ì‹ í˜‘ì¤‘ì•™íšŒ","ìš°ì²´êµ­ì˜ˆê¸ˆë³´í—˜","ìƒˆë§ˆì„ê¸ˆê³ ","ì¹´ì¹´ì˜¤ë±…í¬","ì¼€ì´ë±…í¬","í† ìŠ¤ë±…í¬"];function Hs(){const{authState:l}=He(),{lastMessage:_,connected:H,sendMessage:M}=Ke();js();const[A,h]=p.useState([]),[k,R]=p.useState(!0),[C,le]=p.useState(""),[te,N]=p.useState("all"),[oe,f]=p.useState(!1),[pe,W]=p.useState(!1),[he,ie]=p.useState(!1),[fe,w]=p.useState(!1),[ge,Y]=p.useState("deposit"),[X,t]=p.useState(null),[i,L]=p.useState(null),[B,F]=p.useState(null),[Z,O]=p.useState(!1),[$,d]=p.useState(null),[u,q]=p.useState({username:"",nickname:"",password:"",bank_name:"",bank_account:"",memo:""}),P=async()=>{try{R(!0),console.log("ğŸ‘¥ íšŒì› ëª©ë¡ ì¡°íšŒ ì‹œì‘...");let s=[];if(l.user?.level===1){console.log("ğŸ”“ ì‹œìŠ¤í…œê´€ë¦¬ì: ëª¨ë“  ì‚¬ìš©ì ì¡°íšŒ");const{data:o,error:c}=await x.from("users").select(`
            *,
            referrer:partners!referrer_id(
              id,
              username,
              level,
              opcode,
              secret_key,
              api_token
            )
          `).order("created_at",{ascending:!1});if(c)throw c;console.log(`âœ… íšŒì› ${o?.length||0}ëª… ì¡°íšŒ ì™„ë£Œ`),h(o||[]);return}else{const{data:o}=await x.rpc("get_hierarchical_partners",{p_partner_id:l.user?.id});s=[l.user?.id||"",...o?.map(c=>c.id)||[]],console.log("ğŸ” ì¡°íšŒ ëŒ€ìƒ íŒŒíŠ¸ë„ˆ IDs:",s.length,"ê°œ")}const{data:a,error:r}=await x.from("users").select(`
          *,
          referrer:partners!referrer_id(
            id,
            username,
            level,
            opcode,
            secret_key,
            api_token
          )
        `).in("referrer_id",s).order("created_at",{ascending:!1});if(r)throw r;console.log(`âœ… íšŒì› ${a?.length||0}ëª… ì¡°íšŒ ì™„ë£Œ`),h(a||[])}catch(s){console.error("âŒ íšŒì› ëª©ë¡ ì¡°íšŒ ì‹¤íŒ¨:",s),m.error("íšŒì› ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤."),h([])}finally{R(!1)}};p.useEffect(()=>{P()},[l.user?.id,l.user?.level]),p.useEffect(()=>{const s=x.channel("users-changes").on("postgres_changes",{event:"*",schema:"public",table:"users"},a=>{console.log("ğŸ‘¥ users í…Œì´ë¸” ë³€ê²½ ê°ì§€:",a),P()}).subscribe();return()=>{x.removeChannel(s)}},[]),p.useEffect(()=>{(_?.type==="user_balance_updated"||_?.type==="user_updated")&&(console.log("ğŸ”” ì‚¬ìš©ì ì—…ë°ì´íŠ¸ ì•Œë¦¼ ìˆ˜ì‹ :",_),P())},[_]);const Ce=async()=>{if(!u.username||!u.password){m.error("ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤.");return}try{console.log("ğŸ‘¤ ìƒˆ íšŒì› ìƒì„± ì‹œì‘:",u.username);const{data:s,error:a}=await x.rpc("create_user_with_api",{p_username:u.username,p_nickname:u.nickname||u.username,p_password:u.password,p_bank_name:u.bank_name,p_bank_account:u.bank_account,p_memo:u.memo,p_referrer_id:l.user?.id});if(a)throw console.error("âŒ íšŒì› ìƒì„± DB ì˜¤ë¥˜:",a),a;if(s&&Array.isArray(s)&&s.length>0){const r=s[0];r.success?(m.success(`íšŒì› ${u.username}ì´ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.`),f(!1),q({username:"",nickname:"",password:"",bank_name:"",bank_account:"",memo:""}),await P()):(console.error("âŒ íšŒì› ìƒì„± ì‹¤íŒ¨:",r.error),m.error(r.error||"íšŒì› ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤."))}else console.error("âŒ ì˜ˆìƒì¹˜ ëª»í•œ ì‘ë‹µ:",s),m.error("íšŒì› ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}catch(s){console.error("âŒ íšŒì› ìƒì„± ì „ì²´ ì˜¤ë¥˜:",s),m.error(s.message||"íšŒì› ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}},E=async(s,a)=>{const r=A.find(o=>o.id===s);if(!r){m.error("ì‚¬ìš©ì ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");return}h(o=>o.map(c=>c.id===s?{...c,status:"active",updated_at:new Date().toISOString()}:c));try{d(s),console.log("âœ… íšŒì› ìŠ¹ì¸ ì²˜ë¦¬ ì‹œì‘:",a);const o=r.referrer?.opcode||"",c=r.referrer?.secret_key||"";if(!o||!c)console.warn("âš ï¸ íŒŒíŠ¸ë„ˆ API ì„¤ì •ì´ ì—†ì–´ ì™¸ë¶€ API ë™ê¸°í™” ìŠ¤í‚µ");else{console.log("ğŸŒ ì™¸ë¶€ API ì„œë²„ì— ê³„ì • ìƒì„± ìš”ì²­:",{opcode:o,username:a});const j=await es(o,a,c);if(j.error){h(v=>v.map(I=>I.id===s?{...I,status:"pending"}:I)),m.error(`ì™¸ë¶€ API ë™ê¸°í™” ì‹¤íŒ¨: ${j.error}`),console.error("âŒ ì™¸ë¶€ API ê³„ì • ìƒì„± ì‹¤íŒ¨:",j.error);return}console.log("âœ… ì™¸ë¶€ API ê³„ì • ìƒì„± ì„±ê³µ:",j.data)}const{error:b}=await x.from("users").update({status:"active",updated_at:new Date().toISOString()}).eq("id",s);if(b)throw h(j=>j.map(v=>v.id===s?{...v,status:"pending"}:v)),console.error("âŒ íšŒì› ìŠ¹ì¸ DB ì˜¤ë¥˜:",b),b;m.success(`íšŒì› ${a}ì´ ìŠ¹ì¸ë˜ì—ˆìŠµë‹ˆë‹¤. (ì™¸ë¶€ API ë™ê¸°í™” ì™„ë£Œ)`)}catch(o){console.error("íšŒì› ìŠ¹ì¸ ì‹¤íŒ¨:",o),m.error(o.message||"íšŒì› ìŠ¹ì¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}finally{d(null)}},$e=async(s,a)=>{const r=A.find(o=>o.id===s);h(o=>o.filter(c=>c.id!==s));try{d(s),console.log("âŒ íšŒì› ê°€ì… ê±°ì ˆ:",a);const{error:o}=await x.from("users").update({status:"blocked",memo:(r?.memo||"")+" [ê°€ì… ê±°ì ˆë¨]",updated_at:new Date().toISOString()}).eq("id",s);if(o)throw r&&h(c=>[...c,r]),console.error("âŒ íšŒì› ê±°ì ˆ ì˜¤ë¥˜:",o),o;m.success(`íšŒì› ${a}ì˜ ê°€ì…ì´ ê±°ì ˆë˜ì—ˆìŠµë‹ˆë‹¤.`)}catch(o){console.error("íšŒì› ê±°ì ˆ ì‹¤íŒ¨:",o),m.error(o.message||"íšŒì› ê±°ì ˆì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}finally{d(null)}},U=async()=>{if(!i)return;const s=i;h(a=>a.filter(r=>r.id!==i.id)),W(!1);try{O(!0),console.log("ğŸ—‘ï¸ íšŒì› ì‚­ì œ ì²˜ë¦¬:",i.username);const{error:a}=await x.from("user_sessions").delete().eq("user_id",i.id);a&&console.warn("âš ï¸ ê²Œì„ ì„¸ì…˜ ì‚­ì œ ì¤‘ ì˜¤ë¥˜:",a);const{error:r}=await x.from("message_queue").delete().eq("sender_id",i.id);r&&console.warn("âš ï¸ ë©”ì‹œì§€ í (ë°œì†¡ì) ì‚­ì œ ì¤‘ ì˜¤ë¥˜:",r);const{error:o}=await x.from("message_queue").delete().eq("target_id",i.id);o&&console.warn("âš ï¸ ë©”ì‹œì§€ í (ìˆ˜ì‹ ì) ì‚­ì œ ì¤‘ ì˜¤ë¥˜:",o);const{error:c}=await x.from("notifications").delete().eq("recipient_id",i.id);c&&console.warn("âš ï¸ ì•Œë¦¼ ì‚­ì œ ì¤‘ ì˜¤ë¥˜:",c);const{error:b}=await x.from("realtime_notifications").delete().eq("recipient_id",i.id);b&&console.warn("âš ï¸ ì‹¤ì‹œê°„ ì•Œë¦¼ ì‚­ì œ ì¤‘ ì˜¤ë¥˜:",b);const{error:j}=await x.from("transactions").delete().eq("user_id",i.id);if(j){console.error("âŒ íŠ¸ëœì­ì…˜ ì‚­ì œ ì¤‘ ì˜¤ë¥˜:",j),h(Q=>[...Q,s]),m.error("íšŒì›ì˜ ê±°ë˜ ë‚´ì—­ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤."),W(!0);return}const{error:v}=await x.from("game_records").delete().eq("user_id",i.id);v&&console.warn("âš ï¸ ê²Œì„ ê¸°ë¡ ì‚­ì œ ì¤‘ ì˜¤ë¥˜:",v);const{error:I}=await x.from("users").delete().eq("id",i.id);if(I)throw h(Q=>[...Q,s]),console.error("âŒ íšŒì› ì‚­ì œ ì˜¤ë¥˜:",I),I;console.log("âœ… íšŒì› ì‚­ì œ ì™„ë£Œ:",i.username),m.success(`íšŒì› ${i.username}ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.`),L(null)}catch(a){console.error("íšŒì› ì‚­ì œ ì‹¤íŒ¨:",a),m.error(a.message||"íšŒì› ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤."),W(!0)}finally{O(!1)}},D=async s=>{try{d(s.targetId);const a=A.find(Re=>Re.id===s.targetId);if(!a){m.error("ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");return}if(console.log(`ğŸ’° ê°•ì œ ${s.type==="deposit"?"ì…ê¸ˆ":"ì¶œê¸ˆ"} ì²˜ë¦¬ ì‹œì‘:`,a.username,s.amount),!l.user){m.error("ë¡œê·¸ì¸ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.");return}const{data:r,error:o}=await x.from("partners").select("balance, level, nickname, partner_type").eq("id",l.user.id).single();if(o||!r){m.error("ê´€ë¦¬ì ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");return}const c=r.level===1;if(s.type==="deposit"&&!c&&r.balance<s.amount){m.error(`ê´€ë¦¬ì ë³´ìœ ê¸ˆì´ ë¶€ì¡±í•©ë‹ˆë‹¤. (í˜„ì¬: ${r.balance.toLocaleString()}ì›)`);return}const b=await ts(l.user);if(!b){m.error("ê´€ë¦¬ì API ì„¤ì •ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."),console.error("âŒ opcodeConfigê°€ ì—†ìŠµë‹ˆë‹¤. partners í…Œì´ë¸”ì— opcode, api_token, secret_keyë¥¼ ì„¤ì •í•˜ì„¸ìš”.");return}const j=as(b)?b.opcodes[0]:b;if(!j){m.error("ì‚¬ìš© ê°€ëŠ¥í•œ OPCODEê°€ ì—†ìŠµë‹ˆë‹¤.");return}const v=s.type==="deposit"?await Ze(a.username,s.amount,j.opcode,j.token,j.secretKey):await Je(a.username,s.amount,j.opcode,j.token,j.secretKey);if(!v.success||v.error){m.error(`API ${s.type==="deposit"?"ì…ê¸ˆ":"ì¶œê¸ˆ"} ì‹¤íŒ¨: ${v.error||"ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜"}`),console.error(`API ${s.type==="deposit"?"ì…ê¸ˆ":"ì¶œê¸ˆ"} ì‹¤íŒ¨:`,v.error);return}console.log(`âœ… API ${s.type==="deposit"?"ì…ê¸ˆ":"ì¶œê¸ˆ"} ì„±ê³µ:`,v.data);const I=Qe(v.data,a.username);console.log("ğŸ’° ì‹¤ì œ ì”ê³ :",I);const{error:Q}=await x.from("transactions").insert({user_id:a.id,partner_id:l.user?.id,transaction_type:s.type==="deposit"?"admin_deposit":"admin_withdrawal",amount:s.amount,status:"completed",processed_by:l.user?.id,memo:s.memo||`[ê´€ë¦¬ì ê°•ì œ ${s.type==="deposit"?"ì…ê¸ˆ":"ì¶œê¸ˆ"}] ${l.user?.username}`,balance_before:a.balance||0,balance_after:I,external_response:v.data});if(Q)throw Q;const{error:Ae}=await x.from("users").update({balance:I,updated_at:new Date().toISOString()}).eq("id",a.id);if(Ae)throw Ae;let K=r.balance;s.type==="deposit"?(K=r.balance-s.amount,await x.from("partners").update({balance:K,updated_at:new Date().toISOString()}).eq("id",l.user.id),await x.from("partner_balance_logs").insert({partner_id:l.user.id,balance_before:r.balance,balance_after:K,amount:-s.amount,transaction_type:"withdrawal",from_partner_id:l.user.id,to_partner_id:null,processed_by:l.user.id,memo:`[íšŒì› ê°•ì œì…ê¸ˆ] ${a.username}ì—ê²Œ ${s.amount.toLocaleString()}ì› ì…ê¸ˆ${s.memo?`: ${s.memo}`:""}`}),console.log(`ğŸ’¸ ê´€ë¦¬ì ë³´ìœ ê¸ˆ ì°¨ê°: ${r.balance.toLocaleString()}ì› â†’ ${K.toLocaleString()}ì›`)):(K=r.balance+s.amount,await x.from("partners").update({balance:K,updated_at:new Date().toISOString()}).eq("id",l.user.id),await x.from("partner_balance_logs").insert({partner_id:l.user.id,balance_before:r.balance,balance_after:K,amount:s.amount,transaction_type:"deposit",from_partner_id:null,to_partner_id:l.user.id,processed_by:l.user.id,memo:`[íšŒì› ê°•ì œì¶œê¸ˆ] ${a.username}ìœ¼ë¡œë¶€í„° ${s.amount.toLocaleString()}ì› íšŒìˆ˜${s.memo?`: ${s.memo}`:""}`}),console.log(`ğŸ’° ê´€ë¦¬ì ë³´ìœ ê¸ˆ ì¦ê°€: ${r.balance.toLocaleString()}ì› â†’ ${K.toLocaleString()}ì›`)),H&&M&&(M({type:"user_balance_updated",data:{userId:a.id,amount:s.amount,type:s.type}}),M({type:"partner_balance_updated",data:{partnerId:l.user.id,amount:s.type==="deposit"?-s.amount:s.amount,type:s.type==="deposit"?"withdrawal":"deposit"}})),m.success(`${a.username}ë‹˜ì—ê²Œì„œ ${s.amount.toLocaleString()}ì›ì´ ${s.type==="deposit"?"ì…ê¸ˆ":"ì¶œê¸ˆ"}ë˜ì—ˆìŠµë‹ˆë‹¤.`),await P()}catch(a){throw console.error("ê°•ì œ ì…ì¶œê¸ˆ ì²˜ë¦¬ ì‹¤íŒ¨:",a),m.error(a.message||"ê°•ì œ ì…ì¶œê¸ˆ ì²˜ë¦¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤."),a}finally{d(null)}},ae=s=>{t(s),Y("deposit"),w(!0)},S=s=>{t(s),Y("withdrawal"),w(!0)},De=async s=>{if(!s)return;const a=s.status==="suspended",r=a?"active":"suspended",o=a?(s.memo||"").replace(/\s*\[ì°¨ë‹¨ë¨.*?\]/g,""):(s.memo||"")+" [ì°¨ë‹¨ë¨: ê´€ë¦¬ì ì¡°ì¹˜]";h(c=>c.map(b=>b.id===s.id?{...b,status:r,memo:o,updated_at:new Date().toISOString()}:b));try{d(s.id),console.log("ğŸš« íšŒì› ì°¨ë‹¨/í•´ì œ:",s.username,r);const{error:c}=await x.from("users").update({status:r,memo:o,updated_at:new Date().toISOString()}).eq("id",s.id);if(c)throw h(b=>b.map(j=>j.id===s.id?{...j,status:s.status,memo:s.memo}:j)),c;m.success(`${s.username}ë‹˜ì´ ${a?"ì°¨ë‹¨ í•´ì œ":"ì°¨ë‹¨"}ë˜ì—ˆìŠµë‹ˆë‹¤.`)}catch(c){console.error("íšŒì› ì°¨ë‹¨/í•´ì œ ì‹¤íŒ¨:",c),m.error(c.message||"íšŒì› ì°¨ë‹¨/í•´ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}finally{d(null)}},z=async s=>{if(!s)return;const a=s.status==="blocked";a||h(r=>r.filter(o=>o.id!==s.id));try{if(d(s.id),console.log("ğŸš¨ ë¸”ë™ë¦¬ìŠ¤íŠ¸ ì²˜ë¦¬:",s.username),a){const{data:r,error:o}=await x.rpc("remove_user_from_blacklist_simple",{p_user_id:s.id,p_admin_id:l.user?.id});if(o)throw o;const c=Array.isArray(r)?r[0]:r;if(!c.success)throw new Error(c.error);m.success(`${s.username}ë‹˜ì´ ë¸”ë™ë¦¬ìŠ¤íŠ¸ì—ì„œ í•´ì œë˜ì—ˆìŠµë‹ˆë‹¤.`)}else{const{data:r,error:o}=await x.rpc("add_user_to_blacklist_simple",{p_user_id:s.id,p_admin_id:l.user?.id,p_reason:"ê´€ë¦¬ì ì¡°ì¹˜"});if(o)throw h(b=>[...b,s]),o;const c=Array.isArray(r)?r[0]:r;if(!c.success)throw h(b=>[...b,s]),new Error(c.error);m.success(`${s.username}ë‹˜ì´ ë¸”ë™ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.`)}}catch(r){console.error("ë¸”ë™ë¦¬ìŠ¤íŠ¸ ì²˜ë¦¬ ì‹¤íŒ¨:",r),m.error(r.message||"ë¸”ë™ë¦¬ìŠ¤íŠ¸ ì²˜ë¦¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}finally{d(null)}};p.useEffect(()=>{_?.type==="user_registered"&&(console.log("ğŸ”” ìƒˆ íšŒì› ê°€ì… ì•Œë¦¼ ìˆ˜ì‹ "),P(),m.info("ìƒˆë¡œìš´ íšŒì› ê°€ì… ì‹ ì²­ì´ ìˆìŠµë‹ˆë‹¤."))},[_,P]);const n=A.filter(s=>{if(s.status==="blocked")return!1;const a=C===""||s.username?.toLowerCase().includes(C.toLowerCase())||s.nickname?.toLowerCase().includes(C.toLowerCase())||s.email?.toLowerCase().includes(C.toLowerCase())||s.phone?.includes(C)||s.bank_name?.toLowerCase().includes(C.toLowerCase())||s.bank_account?.includes(C)||s.balance?.toString().includes(C)||s.points?.toString().includes(C)||s.memo?.toLowerCase().includes(C.toLowerCase()),r=te==="all"||s.status===te;return a&&r}),g=A.filter(s=>s.status==="pending").slice(0,5),J=[{key:"username",header:"ì•„ì´ë””"},{key:"nickname",header:"ë‹‰ë„¤ì„"},{key:"referrer_info",header:"ì†Œì†",cell:s=>e.jsx("span",{className:"text-sm text-slate-300",children:s.referrer?s.referrer.username:"ë¯¸ì§€ì •"})},{key:"status",header:"ìƒíƒœ",cell:s=>s.status==="active"?e.jsx(y,{className:"px-3 py-1 bg-gradient-to-r from-emerald-500/20 to-teal-500/20 text-emerald-400 border border-emerald-500/50 rounded-full shadow-[0_0_10px_rgba(16,185,129,0.5)]",children:"â— ìŠ¹ì¸ë¨"}):s.status==="pending"?e.jsx(y,{className:"px-3 py-1 bg-gradient-to-r from-orange-500/20 to-amber-500/20 text-orange-400 border border-orange-500/50 rounded-full shadow-[0_0_10px_rgba(251,146,60,0.5)]",children:"â— ëŒ€ê¸°ì¤‘"}):s.status==="suspended"?e.jsx(y,{className:"px-3 py-1 bg-gradient-to-r from-slate-500/20 to-gray-500/20 text-slate-400 border border-slate-500/50 rounded-full shadow-[0_0_10px_rgba(100,116,139,0.5)]",children:"â— ì°¨ë‹¨ë¨"}):null},{key:"balance",header:"ë³´ìœ ê¸ˆ",cell:s=>e.jsxs("span",{className:"font-mono font-semibold text-cyan-400",children:[(s.balance||0).toLocaleString(),"ì›"]})},{key:"points",header:"í¬ì¸íŠ¸",cell:s=>e.jsxs("span",{className:"font-mono font-semibold text-purple-400",children:[(s.points||0).toLocaleString(),"P"]})},{key:"vip_level",header:"ë ˆë²¨",cell:s=>{const a=s.vip_level||0;return a===0?e.jsx(y,{className:"px-3 py-1 bg-slate-700/50 text-slate-300 border border-slate-600/50 rounded-full",children:"â—‹ Silver"}):a===1?e.jsx(y,{className:"px-3 py-1 bg-gradient-to-r from-yellow-500/20 to-amber-500/20 text-yellow-400 border border-yellow-500/50 rounded-full shadow-[0_0_10px_rgba(234,179,8,0.5)]",children:"âš¡ Gold"}):a===2?e.jsx(y,{className:"px-3 py-1 bg-gradient-to-r from-orange-500/20 to-red-500/20 text-orange-400 border border-orange-500/50 rounded-full shadow-[0_0_10px_rgba(251,146,60,0.5)]",children:"âš¡ Bronze"}):e.jsx(y,{className:"px-3 py-1 bg-gradient-to-r from-purple-500/20 to-pink-500/20 text-purple-400 border border-purple-500/50 rounded-full shadow-[0_0_10px_rgba(168,85,247,0.5)]",children:"âš¡ VIP"})}},{key:"created_at",header:"ê°€ì…ì¼",cell:s=>{const a=new Date(s.created_at),r=a.getFullYear(),o=a.getMonth()+1,c=a.getDate();return e.jsxs("span",{className:"text-slate-400 text-sm",children:[r,". ",o,". ",c,"."]})}},{key:"last_login_at",header:"ìµœê·¼ì ‘ì†",cell:s=>{if(!s.last_login_at)return e.jsx("span",{className:"text-slate-500 text-sm",children:"ë¯¸ì ‘ì†"});const a=new Date(s.last_login_at),r=a.getFullYear(),o=a.getMonth()+1,c=a.getDate();return e.jsxs("span",{className:"text-slate-400 text-sm",children:[r,". ",o,". ",c,"."]})}},{key:"is_online",header:"ì ‘ì†",cell:s=>s.is_online?e.jsx(y,{className:"bg-gradient-to-r from-green-500 to-emerald-500 text-white border-0 animate-pulse",children:"â— ì˜¨ë¼ì¸"}):e.jsx(y,{className:"bg-slate-600 text-slate-300 border-0",children:"â—‹ ì˜¤í”„ë¼ì¸"})},{key:"created_at_old",header:"ê°€ì…ì¼",cell:s=>new Date(s.created_at).toLocaleDateString("ko-KR")},{key:"actions",header:"ê´€ë¦¬",cell:s=>s.status==="pending"?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(T,{size:"sm",onClick:()=>E(s.id,s.username),disabled:$===s.id,className:"btn-premium-success",children:$===s.id?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):e.jsxs(e.Fragment,{children:[e.jsx(Ve,{className:"h-4 w-4 mr-1"}),"ìŠ¹ì¸"]})}),e.jsx(T,{size:"sm",onClick:()=>$e(s.id,s.username),disabled:$===s.id,className:"btn-premium-danger",children:$===s.id?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):e.jsxs(e.Fragment,{children:[e.jsx(Ye,{className:"h-4 w-4 mr-1"}),"ê±°ì ˆ"]})})]}):e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(T,{size:"sm",variant:"outline",onClick:()=>{F(s),ie(!0)},title:"ìƒì„¸ ì •ë³´",children:e.jsx(Xe,{className:"h-4 w-4"})}),e.jsx(T,{size:"sm",variant:"outline",onClick:()=>ae(s),className:"text-green-600 hover:text-green-700",title:"ì…ê¸ˆ",children:e.jsx(qe,{className:"h-4 w-4"})}),e.jsx(T,{size:"sm",variant:"outline",onClick:()=>S(s),className:"text-red-600 hover:text-red-700",title:"ì¶œê¸ˆ",children:e.jsx(qe,{className:"h-4 w-4"})}),e.jsx(T,{size:"sm",variant:"outline",onClick:()=>De(s),disabled:$===s.id,className:s.status==="suspended"?"text-blue-600 hover:text-blue-700":"text-orange-600 hover:text-orange-700",title:s.status==="suspended"?"ì°¨ë‹¨ í•´ì œ":"ì°¨ë‹¨",children:$===s.id?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current"}):s.status==="suspended"?e.jsx(Pe,{className:"h-4 w-4"}):e.jsx(Ee,{className:"h-4 w-4"})}),e.jsx(T,{size:"sm",variant:"outline",onClick:()=>z(s),disabled:$===s.id,className:"text-red-800 hover:text-red-900",title:"ë¸”ë™ë¦¬ìŠ¤íŠ¸ ì¶”ê°€",children:$===s.id?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current"}):e.jsx(Ee,{className:"h-4 w-4"})}),e.jsx(T,{size:"sm",variant:"outline",onClick:()=>{L(s),W(!0)},className:"text-red-600 hover:text-red-700",title:"íšŒì› ì‚­ì œ",children:e.jsx(Fe,{className:"h-4 w-4"})})]})}];return k?e.jsx(ne,{}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-100",children:"íšŒì› ê´€ë¦¬"}),e.jsx("p",{className:"text-sm text-slate-400",children:"ì‹œìŠ¤í…œì— ë“±ë¡ëœ íšŒì›ë“¤ì„ ê´€ë¦¬í•©ë‹ˆë‹¤."})]}),e.jsxs(T,{onClick:()=>f(!0),className:"btn-premium-primary",children:[e.jsx(cs,{className:"h-4 w-4 mr-2"}),"ìƒˆ íšŒì› ìƒì„±"]})]}),e.jsxs("div",{className:"grid gap-5 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(me,{title:"ì „ì²´ íšŒì›",value:A.length.toLocaleString(),subtitle:"â†‘ ë“±ë¡ íšŒì› ìˆ˜",icon:Ge,color:"purple"}),e.jsx(me,{title:"ìŠ¹ì¸ëŒ€ê¸°",value:g.length.toLocaleString(),subtitle:"ëŒ€ê¸° ì¤‘ì¸ íšŒì›",icon:Se,color:"amber"}),e.jsx(me,{title:"í™œì„± íšŒì›",value:A.filter(s=>s.status==="active").length.toLocaleString(),subtitle:"ì •ìƒ í™œë™ íšŒì›",icon:Pe,color:"green"}),e.jsx(me,{title:"ì˜¨ë¼ì¸",value:A.filter(s=>s.is_online).length.toLocaleString(),subtitle:"ì‹¤ì‹œê°„ ì ‘ì†ì",icon:Ue,color:"cyan"})]}),e.jsxs("div",{className:"glass-card rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6 pb-4 border-b border-slate-700/50",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-100 mb-1",children:"íšŒì› ëª©ë¡"}),e.jsxs("p",{className:"text-sm text-slate-400",children:["ì´ ",n.length.toLocaleString(),"ëª…ì˜ íšŒì›ì„ ê´€ë¦¬í•˜ê³  ìˆìŠµë‹ˆë‹¤"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative w-96",children:[e.jsx(ds,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-400"}),e.jsx(ee,{placeholder:"ì•„ì´ë””, ë‹‰ë„¤ì„, ì´ë©”ì¼, ì „í™”ë²ˆí˜¸, ì€í–‰ì •ë³´, ì”ê³ , í¬ì¸íŠ¸, ë©”ëª¨ ê²€ìƒ‰",className:"pl-10 input-premium",value:C,onChange:s=>le(s.target.value)})]}),e.jsxs(Le,{value:te,onValueChange:N,children:[e.jsxs(Te,{className:"w-[160px] input-premium",children:[e.jsx(ms,{className:"h-4 w-4 mr-2"}),e.jsx(Me,{placeholder:"ìƒíƒœ í•„í„°"})]}),e.jsxs(Be,{className:"bg-slate-800 border-slate-700",children:[e.jsx(re,{value:"all",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-slate-500"}),"ì „ì²´"]})}),e.jsx(re,{value:"pending",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-amber-500"}),"ìŠ¹ì¸ëŒ€ê¸°"]})}),e.jsx(re,{value:"active",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500"}),"í™œì„±"]})}),e.jsx(re,{value:"suspended",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-slate-500"}),"ì°¨ë‹¨"]})})]})]})]})]}),e.jsx(ss,{columns:J,data:n,searchable:!1,emptyMessage:C?"ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.":"ë“±ë¡ëœ íšŒì›ì´ ì—†ìŠµë‹ˆë‹¤."})]}),e.jsx(ye,{open:oe,onOpenChange:f,children:e.jsxs(we,{className:"sm:max-w-[500px] bg-slate-900/90 backdrop-blur-md border-slate-700/60 shadow-2xl shadow-blue-500/20",children:[e.jsxs(ve,{children:[e.jsx(_e,{className:"text-xl text-slate-100 bg-gradient-to-r from-blue-400 to-cyan-400 bg-clip-text text-transparent",children:"ìƒˆ íšŒì› ìƒì„±"}),e.jsx(ke,{className:"text-slate-400",children:"ìƒˆë¡œìš´ íšŒì›ì„ ì‹œìŠ¤í…œì— ë“±ë¡í•©ë‹ˆë‹¤. ì™¸ë¶€ APIì™€ ì—°ë™ë©ë‹ˆë‹¤."})]}),e.jsxs("div",{className:"grid gap-5 py-4",children:[e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(se,{htmlFor:"username",className:"text-right text-slate-300",children:"ì•„ì´ë””"}),e.jsx(ee,{id:"username",value:u.username,onChange:s=>q(a=>({...a,username:s.target.value})),className:"col-span-3 input-premium focus:border-blue-500/60 focus:ring-2 focus:ring-blue-500/20",placeholder:"íšŒì› ì•„ì´ë”” ì…ë ¥"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(se,{htmlFor:"nickname",className:"text-right text-slate-300",children:"ë‹‰ë„¤ì„"}),e.jsx(ee,{id:"nickname",value:u.nickname,onChange:s=>q(a=>({...a,nickname:s.target.value})),className:"col-span-3 input-premium focus:border-blue-500/60 focus:ring-2 focus:ring-blue-500/20",placeholder:"íšŒì› ë‹‰ë„¤ì„ ì…ë ¥"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(se,{htmlFor:"password",className:"text-right text-slate-300",children:"ë¹„ë°€ë²ˆí˜¸"}),e.jsx(ee,{id:"password",type:"password",value:u.password,onChange:s=>q(a=>({...a,password:s.target.value})),className:"col-span-3 input-premium focus:border-blue-500/60 focus:ring-2 focus:ring-blue-500/20",placeholder:"ì´ˆê¸° ë¹„ë°€ë²ˆí˜¸ ì…ë ¥"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(se,{className:"text-right text-slate-300",children:"ì€í–‰ëª…"}),e.jsxs(Le,{value:u.bank_name||void 0,onValueChange:s=>q(a=>({...a,bank_name:s})),children:[e.jsx(Te,{className:"col-span-3 input-premium focus:border-blue-500/60 focus:ring-2 focus:ring-blue-500/20",children:e.jsx(Me,{placeholder:"ì€í–‰ ì„ íƒ"})}),e.jsx(Be,{className:"bg-slate-800 border-slate-700",children:Ns.map(s=>e.jsx(re,{value:s,className:"text-slate-200 focus:bg-slate-700 focus:text-slate-100",children:s},s))})]})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(se,{htmlFor:"bank_account",className:"text-right text-slate-300",children:"ê³„ì¢Œë²ˆí˜¸"}),e.jsx(ee,{id:"bank_account",value:u.bank_account,onChange:s=>q(a=>({...a,bank_account:s.target.value})),className:"col-span-3 input-premium focus:border-blue-500/60 focus:ring-2 focus:ring-blue-500/20",placeholder:"ê³„ì¢Œë²ˆí˜¸ ì…ë ¥"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(se,{htmlFor:"memo",className:"text-right text-slate-300",children:"ë©”ëª¨"}),e.jsx(ee,{id:"memo",value:u.memo,onChange:s=>q(a=>({...a,memo:s.target.value})),className:"col-span-3 input-premium focus:border-blue-500/60 focus:ring-2 focus:ring-blue-500/20",placeholder:"ê´€ë¦¬ì ë©”ëª¨"})]})]}),e.jsxs(Ie,{className:"gap-3",children:[e.jsx(T,{type:"button",variant:"outline",onClick:()=>f(!1),className:"bg-slate-800/50 border-slate-700 text-slate-300 hover:bg-slate-700 hover:text-slate-100",children:"ì·¨ì†Œ"}),e.jsx(T,{type:"submit",onClick:Ce,className:"btn-premium-primary",children:"íšŒì› ìƒì„±"})]})]})}),e.jsx(ye,{open:pe,onOpenChange:W,children:e.jsxs(we,{className:"sm:max-w-[425px] bg-slate-900/90 backdrop-blur-md border-slate-700/60 shadow-2xl shadow-red-500/20",children:[e.jsxs(ve,{children:[e.jsx(_e,{className:"text-xl text-slate-100",children:"íšŒì› ì‚­ì œ í™•ì¸"}),e.jsxs(ke,{className:"text-slate-400",children:['ì •ë§ë¡œ íšŒì› "',i?.username,'"ì„(ë¥¼) ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.']})]}),e.jsxs(Ie,{className:"gap-3",children:[e.jsx(T,{variant:"outline",onClick:()=>W(!1),disabled:Z,className:"bg-slate-800/50 border-slate-700 text-slate-300 hover:bg-slate-700 hover:text-slate-100",children:"ì·¨ì†Œ"}),e.jsx(T,{onClick:U,disabled:Z,className:"btn-premium-danger",children:Z?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"ì‚­ì œ ì¤‘..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Fe,{className:"h-4 w-4 mr-2"}),"ì˜êµ¬ ì‚­ì œ"]})})]})]})}),e.jsx(is,{open:fe,onOpenChange:s=>{w(s),s||t(null)},type:ge,targetType:"user",selectedTarget:X?{id:X.id,username:X.username,nickname:X.nickname,balance:X.balance||0}:null,onSubmit:D,onTypeChange:Y}),e.jsx(gs,{user:B,isOpen:he,onClose:()=>{ie(!1),F(null)}})]})}export{Hs as UserManagement,Hs as default};
