import{k as S,r as c,j as e,aV as f,T as G,B as j,w as P,U as B,s as N,t as x}from"./index-DxPzcoqH.js";import{I as v,S as E}from"./ImageWithFallback--u8uG3-L.js";import{S as T,g as U}from"./gameApi-D9X7YA0A.js";import{T as C}from"./target-DP9-caxN.js";import{G as b}from"./gift-BDQYS2DT.js";import{P as A}from"./play-DEDvxK5W.js";import{T as L}from"./trophy-mu9wZvAx.js";import{Z as V}from"./zap-BX38jgCv.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]],q=S("flame",$);function J({user:o,onRouteChange:i}){const[r,w]=c.useState([]),[m,y]=c.useState([]),[h,p]=c.useState(0),[_,u]=c.useState(!0);c.useEffect(()=>{(async()=>{try{const{data:t,error:a}=await N.from("banners").select("*").eq("status","active").eq("banner_type","banner").order("display_order",{ascending:!0});if(a)throw a;w(t||[])}catch(t){console.error("배너 조회 오류:",t)}})()},[]),c.useEffect(()=>{(async()=>{try{u(!0);const{data:t,error:a}=await N.from("game_launch_sessions").select(`
            game_id,
            games:game_id (
              id,
              name,
              image_url,
              game_providers:provider_id (
                name
              )
            )
          `).gte("launched_at",new Date(Date.now()-10080*60*1e3).toISOString()).limit(100);if(a)throw a;const d=new Map;t?.forEach(l=>{if(l.games){const n=l.game_id,g=d.get(n);g?g.count++:d.set(n,{game:l.games,count:1})}});const I=Array.from(d.values()).sort((l,n)=>n.count-l.count).slice(0,8).map(({game:l,count:n})=>({game_id:l.id,name:l.name,provider_name:l.game_providers?.name||"Unknown",image_url:l.image_url,play_count:n}));y(I)}catch(t){console.error("인기 게임 조회 오류:",t)}finally{u(!1)}})()},[]),c.useEffect(()=>{if(r.length>1){const s=setInterval(()=>{p(t=>(t+1)%r.length)},5e3);return()=>clearInterval(s)}},[r.length]);const k=async(s,t)=>{try{x.info(`${t} 게임을 시작합니다...`);const a=await U.launchGame(o.id,s);if(a.success&&a.launchUrl)window.open(a.launchUrl,"_blank","width=1200,height=800"),x.success("게임이 시작되었습니다!");else throw new Error(a.error||"게임 실행에 실패했습니다.")}catch(a){console.error("게임 실행 오류:",a),x.error(a instanceof Error?a.message:"게임 실행 중 오류가 발생했습니다.")}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"luxury-card p-6 rounded-xl",children:e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold gold-text flex items-center gap-2",children:[e.jsx(f,{className:"h-8 w-8"}),"환영합니다, ",o.nickname,"님!"]}),e.jsx("p",{className:"text-slate-300 mt-2",children:"최고의 게임 경험을 즐겨보세요"})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-slate-400",children:"보유 잔고"}),e.jsxs("p",{className:"text-2xl font-bold text-yellow-400",children:[typeof o.balance=="number"?o.balance.toLocaleString():"0","원"]})]})})]})}),r.length>0&&e.jsxs("div",{className:"relative rounded-xl overflow-hidden luxury-card",children:[e.jsx("div",{className:"relative h-64 md:h-80",children:r.map((s,t)=>e.jsxs("div",{className:`absolute inset-0 transition-opacity duration-500 ${t===h?"opacity-100":"opacity-0"}`,children:[e.jsx(v,{src:s.image_url,alt:s.title,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-6",children:e.jsx("h3",{className:"text-2xl font-bold text-white",children:s.title})})]},s.id))}),r.length>1&&e.jsx("div",{className:"absolute bottom-4 right-4 flex gap-2",children:r.map((s,t)=>e.jsx("button",{onClick:()=>p(t),className:`w-2 h-2 rounded-full transition-all ${t===h?"bg-yellow-400 w-8":"bg-white/50"}`},t))})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx("button",{onClick:()=>i("/user/casino"),className:"luxury-card p-6 rounded-xl hover:scale-105 transition-all text-center group",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"p-4 rounded-full bg-gradient-to-br from-yellow-500/20 to-red-500/20 group-hover:from-yellow-500/30 group-hover:to-red-500/30 transition-all",children:e.jsx(E,{className:"h-8 w-8 text-yellow-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-white text-lg",children:"카지노"}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"실시간 라이브"})]})]})}),e.jsx("button",{onClick:()=>i("/user/slot"),className:"luxury-card p-6 rounded-xl hover:scale-105 transition-all text-center group",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"p-4 rounded-full bg-gradient-to-br from-purple-500/20 to-pink-500/20 group-hover:from-purple-500/30 group-hover:to-pink-500/30 transition-all",children:e.jsx(C,{className:"h-8 w-8 text-purple-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-white text-lg",children:"슬롯"}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"다양한 게임"})]})]})}),e.jsx("button",{onClick:()=>i("/user/deposit"),className:"luxury-card p-6 rounded-xl hover:scale-105 transition-all text-center group",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"p-4 rounded-full bg-gradient-to-br from-green-500/20 to-emerald-500/20 group-hover:from-green-500/30 group-hover:to-emerald-500/30 transition-all",children:e.jsx(G,{className:"h-8 w-8 text-green-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-white text-lg",children:"입금"}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"빠른 충전"})]})]})}),e.jsx("button",{onClick:()=>i("/user/withdraw"),className:"luxury-card p-6 rounded-xl hover:scale-105 transition-all text-center group",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"p-4 rounded-full bg-gradient-to-br from-blue-500/20 to-cyan-500/20 group-hover:from-blue-500/30 group-hover:to-cyan-500/30 transition-all",children:e.jsx(b,{className:"h-8 w-8 text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-white text-lg",children:"출금"}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"안전한 출금"})]})]})})]}),e.jsxs("div",{className:"luxury-card p-6 rounded-xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[e.jsx(q,{className:"h-6 w-6 text-orange-400"}),"인기 게임"]}),e.jsxs(j,{className:"bg-gradient-to-r from-orange-500 to-red-500",children:[e.jsx(T,{className:"h-3 w-3 mr-1"}),"HOT"]})]}),_?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[...Array(8)].map((s,t)=>e.jsx("div",{className:"aspect-[3/4] bg-slate-700/50 rounded-lg animate-pulse"},t))}):m.length>0?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:m.map(s=>e.jsxs("div",{className:"group relative rounded-lg overflow-hidden game-card-hover bg-slate-800/50 border border-slate-700/50",children:[e.jsxs("div",{className:"aspect-[3/4] relative",children:[e.jsx(v,{src:s.image_url||"",alt:s.name,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:e.jsxs(P,{onClick:()=>k(s.game_id,s.name),className:"bg-yellow-500 hover:bg-yellow-600 text-black font-bold",children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"플레이"]})}),e.jsx("div",{className:"absolute top-2 right-2",children:e.jsxs(j,{className:"bg-red-500/90",children:[e.jsx(B,{className:"h-3 w-3 mr-1"}),s.play_count]})})]}),e.jsxs("div",{className:"p-3",children:[e.jsx("p",{className:"font-bold text-white text-sm truncate",children:s.name}),e.jsx("p",{className:"text-xs text-slate-400 truncate",children:s.provider_name})]})]},s.game_id))}):e.jsx("div",{className:"text-center py-12 text-slate-400",children:"인기 게임 정보가 없습니다."})]}),e.jsx("div",{className:"luxury-card p-6 rounded-xl bg-gradient-to-br from-yellow-900/20 to-orange-900/20",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 rounded-full bg-yellow-500/20",children:e.jsx(L,{className:"h-8 w-8 text-yellow-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold text-yellow-400 mb-2",children:"VIP 회원 혜택"}),e.jsx("p",{className:"text-slate-300 mb-4",children:"더 많은 게임을 즐기고 VIP 레벨을 올려 특별한 혜택을 받아보세요!"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-300",children:[e.jsx(V,{className:"h-4 w-4 text-yellow-400"}),"빠른 입출금"]}),e.jsxs("div",{className:"flex items-center gap-2 text-slate-300",children:[e.jsx(b,{className:"h-4 w-4 text-yellow-400"}),"특별 보너스"]}),e.jsxs("div",{className:"flex items-center gap-2 text-slate-300",children:[e.jsx(f,{className:"h-4 w-4 text-yellow-400"}),"전용 고객지원"]})]})]})]})})]})}export{J as UserHome,J as default};
