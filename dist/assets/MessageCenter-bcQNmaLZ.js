import{j as e,r as l}from"./react-core-CwM-CeLv.js";import{o as _e,s as c,m as p,l as x,S as C,p as S,q as k,r as D,t as d,I as E,L as ye,B as J}from"./index-B_UTQDGv.js";import{T as Q}from"./textarea-DFPvBWH6.js";import{D as ge}from"./DataTable-CkrjkuPp.js";import{A as X,f as Y,a as Z,b as ee,c as se,d as te}from"./AdminDialog-B3Ze75jm.js";import{k as o}from"./vendor-CQn7sZ7L.js";import{c as B,an as re,U as Ne,K as ae,N as be,n as ne,ad as le,s as we,ao as Ce}from"./lucide-icons-wLPRtdhM.js";import"./radix-ui-SX2QAG6c.js";import"./supabase-r6ABpEO8.js";function Ee({user:b}){if(b.level>6)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(B,{className:"h-12 w-12 text-yellow-500 mx-auto"}),e.jsx("p",{className:"text-muted-foreground",children:"ë©”ì‹œì§€ ì„¼í„°ëŠ” ë§¤ì¥ ì´ìƒë§Œ ì ‘ê·¼ ê°€ëŠ¥í•©ë‹ˆë‹¤."})]})});const[ie,K]=l.useState(!0),[ce,z]=l.useState([]),[i,W]=l.useState("received"),[T,de]=l.useState("all"),[q,oe]=l.useState("all"),[y,me]=l.useState(""),[H,g]=l.useState(!1),[v,U]=l.useState(null),[xe,L]=l.useState(!1),[h,I]=l.useState([]),[F,A]=l.useState([]),[w,R]=l.useState(""),[ue,P]=l.useState(!1),[r,u]=l.useState({recipient_type:"user",recipient_username:"",broadcast_type:"single",selected_users:[],title:"",content:"",message_type:"normal"}),[M,$]=l.useState(""),{lastMessage:O,sendMessage:G}=_e();l.useEffect(()=>{const s=c.channel("messages-changes").on("postgres_changes",{event:"*",schema:"public",table:"messages"},t=>{console.log("ğŸ”” ë©”ì‹œì§€ í…Œì´ë¸” ë³€ê²½ ê°ì§€:",t),N()}).subscribe();return()=>{c.removeChannel(s)}},[]),l.useEffect(()=>{if(!w.trim())A(h);else{const s=h.filter(t=>t.username.toLowerCase().includes(w.toLowerCase()));A(s)}},[w,h]);const pe=async()=>{try{P(!0);const s=r.recipient_type==="user"?"users":"partners",{data:t,error:n}=await c.from(s).select("id, username").order("username");if(n)throw n;I(t||[]),A(t||[]),R("")}catch(s){console.error("ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ ì˜¤ë¥˜:",s),o.error("ì‚¬ìš©ì ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}finally{P(!1)}},N=async()=>{try{K(!0);let s=c.from("messages").select("*").order("created_at",{ascending:!1});if(i==="received"?s=s.eq("receiver_type","partner").eq("receiver_id",b.id):s=s.eq("sender_type","partner").eq("sender_id",b.id),T!=="all"&&(s=s.eq("message_type",T)),q!=="all"){const a=q==="read";s=s.eq("status",a?"read":"unread")}y&&(s=s.or(`subject.ilike.%${y}%,content.ilike.%${y}%`));const{data:t,error:n}=await s;if(n)throw n;const m=await Promise.all((t||[]).map(async a=>{const{count:f}=await c.from("messages").select("*",{count:"exact"}).eq("parent_id",a.id);let j="ì•Œ ìˆ˜ ì—†ìŒ";if(a.sender_type==="user"){const{data:_}=await c.from("users").select("username").eq("id",a.sender_id).single();j=_?.username||"ì‚¬ìš©ì"}else if(a.sender_type==="partner"){const{data:_}=await c.from("partners").select("username").eq("id",a.sender_id).single();j=_?.username||"ê´€ë¦¬ì"}let V="ì•Œ ìˆ˜ ì—†ìŒ";if(a.receiver_type==="user"){const{data:_}=await c.from("users").select("username").eq("id",a.receiver_id).single();V=_?.username||"ì‚¬ìš©ì"}else if(a.receiver_type==="partner"){const{data:_}=await c.from("partners").select("username").eq("id",a.receiver_id).single();V=_?.username||"ê´€ë¦¬ì"}return{id:a.id,sender_type:a.sender_type,sender_id:a.sender_id,sender_username:j,recipient_type:a.receiver_type,recipient_id:a.receiver_id,recipient_username:V,title:a.subject,content:a.content,message_type:a.message_type,is_read:a.status==="read",read_at:a.read_at,parent_message_id:a.parent_id,created_at:a.created_at,reply_count:f||0}}));z(m)}catch(s){console.error("ë©”ì‹œì§€ ì¡°íšŒ ì˜¤ë¥˜:",s),o.error("ë©”ì‹œì§€ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}finally{K(!1)}},he=async s=>{try{const{error:t}=await c.from("messages").update({status:"read",read_at:new Date().toISOString()}).eq("id",s).eq("status","unread");if(t)throw t;z(n=>n.map(m=>m.id===s?{...m,is_read:!0,read_at:new Date().toISOString()}:m))}catch(t){console.error("ë©”ì‹œì§€ ì½ìŒ ì²˜ë¦¬ ì˜¤ë¥˜:",t)}},je=async()=>{if(!r.content.trim()){o.error("ë©”ì‹œì§€ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");return}if(r.broadcast_type==="single"&&!r.recipient_username.trim()){o.error("ìˆ˜ì‹ ìë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");return}if(r.broadcast_type==="selected"&&r.selected_users.length===0){o.error("ìˆ˜ì‹ ìë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.");return}try{let s=[];if(r.broadcast_type==="single"){const a=r.recipient_type==="user"?"users":"partners",{data:f,error:j}=await c.from(a).select("id, username").eq("username",r.recipient_username.trim()).single();if(j||!f){o.error("ìˆ˜ì‹ ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");return}s=[f]}else if(r.broadcast_type==="selected"){const a=r.recipient_type==="user"?"users":"partners",{data:f,error:j}=await c.from(a).select("id, username").in("username",r.selected_users);if(j){o.error("ìˆ˜ì‹ ì ì¡°íšŒì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");return}s=f||[]}else if(r.broadcast_type==="all"){const a=r.recipient_type==="user"?"users":"partners",{data:f,error:j}=await c.from(a).select("id, username");if(j){o.error("ì „ì²´ ì‚¬ìš©ì ì¡°íšŒì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");return}s=f||[]}if(s.length===0){o.error("ì „ì†¡í•  ìˆ˜ì‹ ìê°€ ì—†ìŠµë‹ˆë‹¤.");return}const t=s.map(a=>({sender_type:"partner",sender_id:b.id,receiver_type:r.recipient_type,receiver_id:a.id,subject:r.title||null,content:r.content.trim(),message_type:r.message_type})),{error:n}=await c.from("messages").insert(t);if(n)throw n;const m=s.length;o.success(`ë©”ì‹œì§€ê°€ ${m}ëª…ì—ê²Œ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤.`),G&&s.forEach(a=>{G("new_message",{recipient_type:r.recipient_type,recipient_id:a.id,title:r.title,content:r.content})}),u({recipient_type:"user",recipient_username:"",broadcast_type:"single",selected_users:[],title:"",content:"",message_type:"normal"}),L(!1),g(!1),N()}catch(s){console.error("ë©”ì‹œì§€ ì „ì†¡ ì˜¤ë¥˜:",s),o.error("ë©”ì‹œì§€ ì „ì†¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}},fe=async()=>{if(!v||!M.trim()){o.error("ë‹µì¥ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");return}try{const s={sender_type:"partner",sender_id:b.id,receiver_type:v.sender_type,receiver_id:v.sender_id,subject:v.title?`Re: ${v.title}`:null,content:M.trim(),message_type:"normal",parent_id:v.id},{error:t}=await c.from("messages").insert([s]);if(t)throw t;o.success("ë‹µì¥ì´ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤."),$(""),g(!1),N()}catch(s){console.error("ë‹µì¥ ì „ì†¡ ì˜¤ë¥˜:",s),o.error("ë‹µì¥ ì „ì†¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}};l.useEffect(()=>{O&&O.type==="new_message"&&(o.info("ìƒˆë¡œìš´ ë©”ì‹œì§€ê°€ ë„ì°©í–ˆìŠµë‹ˆë‹¤."),N())},[O]),l.useEffect(()=>{N()},[i,T,q]),l.useEffect(()=>{const s=setTimeout(()=>{y!==void 0&&N()},300);return()=>clearTimeout(s)},[y]);const ve=[{key:"sender_username",title:i==="received"?"ë°œì‹ ì":"ìˆ˜ì‹ ì",render:(s,t)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(we,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:i==="received"?t.sender_username:t.recipient_username}),e.jsx("div",{className:"text-xs text-muted-foreground",children:i==="received"?t.sender_type:t.recipient_type})]})]})},{key:"title",title:"ì œëª©/ë‚´ìš©",render:(s,t)=>e.jsxs("div",{className:`${!t.is_read&&i==="received"?"font-semibold":""}`,children:[e.jsx("div",{className:"text-sm",children:s||"(ì œëª© ì—†ìŒ)"}),e.jsx("div",{className:"text-xs text-muted-foreground truncate max-w-[300px]",children:t.content}),t.reply_count>0&&e.jsxs(J,{variant:"outline",className:"text-xs mt-1",children:["ë‹µê¸€ ",t.reply_count,"ê°œ"]})]})},{key:"message_type",title:"ìœ í˜•",render:s=>{const t={normal:{label:"ì¼ë°˜",variant:"secondary"},system:{label:"ì‹œìŠ¤í…œ",variant:"outline"},urgent:{label:"ê¸´ê¸‰",variant:"destructive"}},n=t[s]||t.normal;return e.jsx(J,{variant:n.variant,children:n.label})}},{key:"is_read",title:"ì½ìŒ",render:(s,t)=>e.jsxs("div",{className:"flex items-center gap-1",children:[s?e.jsx(ne,{className:"h-4 w-4 text-green-600"}):e.jsx(le,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{className:"text-xs",children:s?"ì½ìŒ":"ì•ˆì½ìŒ"})]})},{key:"created_at",title:"ë‚ ì§œ",render:s=>e.jsxs("div",{className:"text-sm",children:[new Date(s).toLocaleDateString("ko-KR"),e.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(s).toLocaleTimeString("ko-KR")})]})},{key:"actions",title:"ê´€ë¦¬",render:(s,t)=>e.jsxs(X,{open:H&&v?.id===t.id,onOpenChange:n=>{g(n),n?(U(t),$(""),L(!1),!t.is_read&&i==="received"&&he(t.id)):U(null)},children:[e.jsx(Y,{asChild:!0,children:e.jsxs(p,{size:"sm",variant:"outline",className:"h-8 px-3 flex items-center gap-1",children:[e.jsx(B,{className:"h-4 w-4"}),"ë³´ê¸°"]})}),e.jsxs(Z,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(ee,{children:[e.jsxs(se,{children:[i==="received"?"ë°›ì€ ë©”ì‹œì§€":"ë³´ë‚¸ ë©”ì‹œì§€"," - ",t.title||"(ì œëª© ì—†ìŒ)"]}),e.jsxs(te,{children:["ë©”ì‹œì§€ ë‚´ìš©ì„ í™•ì¸í•˜ê³  ",i==="received"?"ë‹µì¥ì„ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤":"ì „ì†¡ëœ ë©”ì‹œì§€ì˜ ìƒì„¸ ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤","."]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(x,{children:"ë°œì‹ ì"}),e.jsx("p",{className:"text-sm font-medium",children:t.sender_username})]}),e.jsxs("div",{children:[e.jsx(x,{children:"ìˆ˜ì‹ ì"}),e.jsx("p",{className:"text-sm font-medium",children:t.recipient_username})]}),e.jsxs("div",{children:[e.jsx(x,{children:"ì „ì†¡ì¼ì‹œ"}),e.jsx("p",{className:"text-sm",children:new Date(t.created_at).toLocaleString("ko-KR")})]}),e.jsxs("div",{children:[e.jsx(x,{children:"ë©”ì‹œì§€ ìœ í˜•"}),e.jsx("p",{className:"text-sm",children:t.message_type})]})]}),e.jsxs("div",{children:[e.jsx(x,{children:"ë©”ì‹œì§€ ë‚´ìš©"}),e.jsx("div",{className:"p-3 bg-muted rounded-md mt-1",children:e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:t.content})})]}),i==="received"&&e.jsxs("div",{children:[e.jsx(x,{htmlFor:"reply",children:"ë‹µì¥ ì‘ì„±"}),e.jsx(Q,{id:"reply",placeholder:"ë‹µì¥ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”...",value:M,onChange:n=>$(n.target.value),rows:4,className:"mt-1"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(p,{variant:"outline",onClick:()=>g(!1),children:"ë‹«ê¸°"}),i==="received"&&e.jsxs(p,{onClick:fe,disabled:!M.trim(),children:[e.jsx(Ce,{className:"h-4 w-4 mr-2"}),"ë‹µì¥ ë³´ë‚´ê¸°"]})]})]})]})]})}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-100",children:"ë©”ì‹œì§€ ì„¼í„°"}),e.jsx("p",{className:"text-sm text-slate-400",children:"ì‚¬ìš©ìì™€ ê´€ë¦¬ì ê°„ 1:1 ë©”ì‹œì§€ë¥¼ ì£¼ê³ ë°›ìŠµë‹ˆë‹¤. (ê°œë³„, ì„ íƒ, ì „ì²´ ì „ì†¡ ì§€ì›)"})]}),e.jsxs(X,{open:H&&xe,onOpenChange:s=>{g(s),s?(L(!0),U(null),R("")):(R(""),I([]),A([]))},children:[e.jsx(Y,{asChild:!0,children:e.jsxs(p,{className:"btn-premium-primary",children:[e.jsx(re,{className:"h-4 w-4 mr-2"}),"ìƒˆ ë©”ì‹œì§€"]})}),e.jsxs(Z,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(ee,{children:[e.jsxs(se,{className:"flex items-center gap-2",children:[e.jsx(Ne,{className:"h-5 w-5"}),"ìƒˆ ë©”ì‹œì§€ ì‘ì„±"]}),e.jsx(te,{children:"ê°œë³„, ì„ íƒ, ë˜ëŠ” ì „ì²´ ì‚¬ìš©ìì—ê²Œ ë©”ì‹œì§€ë¥¼ ì „ì†¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì „ì†¡ ë°©ì‹ì„ ì„ íƒí•˜ê³  ë©”ì‹œì§€ ë‚´ìš©ì„ ì‘ì„±í•´ì£¼ì„¸ìš”."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"recipient_type",children:"ìˆ˜ì‹ ì ìœ í˜•"}),e.jsxs(C,{value:r.recipient_type,onValueChange:s=>{u(t=>({...t,recipient_type:s,recipient_username:"",selected_users:[]})),I([])},children:[e.jsx(S,{children:e.jsx(k,{})}),e.jsxs(D,{children:[e.jsx(d,{value:"user",children:"ì‚¬ìš©ì"}),e.jsx(d,{value:"partner",children:"ê´€ë¦¬ì"})]})]})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"broadcast_type",children:"ì „ì†¡ ë°©ì‹"}),e.jsxs(C,{value:r.broadcast_type,onValueChange:s=>{u(t=>({...t,broadcast_type:s,recipient_username:"",selected_users:[]})),(s==="selected"||s==="all")&&pe()},children:[e.jsx(S,{children:e.jsx(k,{})}),e.jsxs(D,{children:[e.jsx(d,{value:"single",children:"ê°œë³„ ì „ì†¡"}),e.jsx(d,{value:"selected",children:"ì„ íƒ ì „ì†¡"}),e.jsx(d,{value:"all",children:"ì „ì²´ ì „ì†¡"})]})]})]})]}),r.broadcast_type==="single"&&e.jsxs("div",{children:[e.jsx(x,{htmlFor:"recipient_username",children:"ìˆ˜ì‹ ì ê²€ìƒ‰"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ae,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 h-4 w-4"}),e.jsx(E,{id:"recipient_username",value:r.recipient_username,onChange:s=>u(t=>({...t,recipient_username:s.target.value})),placeholder:"ìˆ˜ì‹ ì IDë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: smcdev111)",className:"pl-9 input-premium"})]}),e.jsx("p",{className:"text-xs text-slate-500",children:'ğŸ’¡ Tip: ì‚¬ìš©ìê°€ ë§ì€ ê²½ìš° "ì„ íƒ ì „ì†¡"ì„ ì´ìš©í•˜ì‹œë©´ ê²€ìƒ‰í•˜ì—¬ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.'})]})]}),r.broadcast_type==="selected"&&e.jsxs("div",{children:[e.jsx(x,{children:"ìˆ˜ì‹ ì ì„ íƒ"}),ue?e.jsxs("div",{className:"flex items-center justify-center p-8 text-slate-400",children:[e.jsx("div",{className:"loading-premium w-8 h-8"}),e.jsx("span",{className:"ml-3",children:"ì‚¬ìš©ì ëª©ë¡ ë¡œë”© ì¤‘..."})]}):e.jsxs("div",{className:"mt-2 space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(be,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 h-4 w-4"}),e.jsx(E,{value:w,onChange:s=>R(s.target.value),placeholder:"ì‚¬ìš©ì IDë¡œ ê²€ìƒ‰...",className:"pl-9 input-premium"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm text-slate-300",children:[F.length,"ëª… í‘œì‹œ ì¤‘ / ì´ ",h.length,"ëª…"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(p,{size:"sm",variant:"outline",onClick:()=>{const s=F.map(t=>t.username);u(t=>({...t,selected_users:Array.from(new Set([...t.selected_users,...s]))}))},className:"btn-premium-success text-xs px-2 py-1 h-7",children:"í˜„ì¬ í˜ì´ì§€ ì „ì²´ ì„ íƒ"}),e.jsx(p,{size:"sm",variant:"outline",onClick:()=>{u(s=>({...s,selected_users:[]}))},className:"text-xs px-2 py-1 h-7",children:"ì „ì²´ í•´ì œ"})]})]}),e.jsxs("div",{className:"max-h-64 overflow-y-auto border border-slate-600 rounded-lg bg-slate-900/50 p-3 space-y-1",children:[F.map(s=>e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer hover:bg-slate-800/50 p-2 rounded transition-colors",children:[e.jsx("input",{type:"checkbox",checked:r.selected_users.includes(s.username),onChange:t=>{const n=s.username;t.target.checked?u(m=>({...m,selected_users:[...m.selected_users,n]})):u(m=>({...m,selected_users:m.selected_users.filter(a=>a!==n)}))},className:"rounded w-4 h-4"}),e.jsx("span",{className:"text-sm text-slate-200",children:s.username})]},s.id)),F.length===0&&e.jsx("div",{className:"text-center text-sm text-slate-500 py-8",children:w?"ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.":"ì‚¬ìš©ìê°€ ì—†ìŠµë‹ˆë‹¤."})]})]}),r.selected_users.length>0&&e.jsxs("div",{className:"mt-3 p-3 bg-blue-900/30 border border-blue-600/30 rounded-lg",children:[e.jsxs("div",{className:"text-sm text-blue-300 flex items-center gap-2",children:[e.jsx(ne,{className:"h-4 w-4"}),e.jsx("strong",{children:"ì„ íƒëœ ì‚¬ìš©ì:"})," ",r.selected_users.length,"ëª…"]}),e.jsx("div",{className:"text-xs text-blue-400 mt-2 max-h-24 overflow-y-auto",children:r.selected_users.join(", ")})]})]}),r.broadcast_type==="all"&&e.jsxs("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-md",children:[e.jsxs("div",{className:"flex items-center gap-2 text-yellow-800 mb-2",children:[e.jsx(le,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"ì „ì²´ ì „ì†¡ í™•ì¸"})]}),e.jsxs("p",{className:"text-sm text-yellow-700",children:["ëª¨ë“  ",r.recipient_type==="user"?"ì‚¬ìš©ì":"ê´€ë¦¬ì","ì—ê²Œ ë©”ì‹œì§€ê°€ ì „ì†¡ë©ë‹ˆë‹¤.",h.length>0&&e.jsxs("span",{className:"font-medium",children:[" (ì´ ",h.length,"ëª…)"]})]}),h.length>0&&e.jsxs("div",{className:"mt-2 text-xs text-yellow-600",children:["ëŒ€ìƒ: ",h.map(s=>s.username).join(", ")]})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"new_title",children:"ì œëª© (ì„ íƒ)"}),e.jsx(E,{id:"new_title",value:r.title,onChange:s=>u(t=>({...t,title:s.target.value})),placeholder:"ë©”ì‹œì§€ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”"})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"new_content",children:"ë‚´ìš© *"}),e.jsx(Q,{id:"new_content",value:r.content,onChange:s=>u(t=>({...t,content:s.target.value})),placeholder:"ë©”ì‹œì§€ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”",rows:6})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"message_type",children:"ë©”ì‹œì§€ ìœ í˜•"}),e.jsxs(C,{value:r.message_type,onValueChange:s=>u(t=>({...t,message_type:s})),children:[e.jsx(S,{children:e.jsx(k,{})}),e.jsxs(D,{children:[e.jsx(d,{value:"normal",children:"ì¼ë°˜"}),e.jsx(d,{value:"system",children:"ì‹œìŠ¤í…œ"}),e.jsx(d,{value:"urgent",children:"ê¸´ê¸‰"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(p,{variant:"outline",onClick:()=>g(!1),children:"ì·¨ì†Œ"}),e.jsxs(p,{onClick:je,disabled:!r.content.trim()||r.broadcast_type==="single"&&!r.recipient_username.trim()||r.broadcast_type==="selected"&&r.selected_users.length===0,children:[e.jsx(re,{className:"h-4 w-4 mr-2"}),"ì „ì†¡",r.broadcast_type==="single"&&" (1ëª…)",r.broadcast_type==="selected"&&` (${r.selected_users.length}ëª…)`,r.broadcast_type==="all"&&` (${h.length}ëª…)`]})]})]})]})]})]}),e.jsxs("div",{className:"glass-card rounded-xl p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6 pb-4 border-b border-slate-700/50",children:e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold text-slate-100 flex items-center gap-2",children:[e.jsx(B,{className:"h-5 w-5 text-blue-400"}),"ë©”ì‹œì§€ ëª©ë¡"]}),e.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"ì‚¬ìš©ìì™€ ê´€ë¦¬ì ê°„ ë©”ì‹œì§€ë¥¼ ì£¼ê³ ë°›ê³  ê´€ë¦¬í•©ë‹ˆë‹¤. ê°œë³„, ì„ íƒ, ì „ì²´ ì „ì†¡ì„ ì§€ì›í•©ë‹ˆë‹¤."})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(p,{variant:i==="received"?"default":"outline",onClick:()=>W("received"),className:i==="received"?"btn-premium-primary":"",children:"ë°›ì€ ë©”ì‹œì§€"}),e.jsx(p,{variant:i==="sent"?"default":"outline",onClick:()=>W("sent"),className:i==="sent"?"btn-premium-primary":"",children:"ë³´ë‚¸ ë©”ì‹œì§€"})]}),e.jsx("div",{className:"flex-1 min-w-[200px]",children:e.jsxs("div",{className:"relative",children:[e.jsx(ae,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 h-4 w-4"}),e.jsx(E,{placeholder:"ì œëª©, ë‚´ìš©ìœ¼ë¡œ ê²€ìƒ‰...",value:y,onChange:s=>me(s.target.value),className:"pl-9 input-premium"})]})}),e.jsxs(C,{value:T,onValueChange:de,children:[e.jsx(S,{className:"w-[120px] bg-slate-800/50 border-slate-600",children:e.jsx(k,{})}),e.jsxs(D,{children:[e.jsx(d,{value:"all",children:"ì „ì²´ ìœ í˜•"}),e.jsx(d,{value:"normal",children:"ì¼ë°˜"}),e.jsx(d,{value:"system",children:"ì‹œìŠ¤í…œ"}),e.jsx(d,{value:"urgent",children:"ê¸´ê¸‰"})]})]}),i==="received"&&e.jsxs(C,{value:q,onValueChange:oe,children:[e.jsx(S,{className:"w-[120px] bg-slate-800/50 border-slate-600",children:e.jsx(k,{})}),e.jsxs(D,{children:[e.jsx(d,{value:"all",children:"ì „ì²´"}),e.jsx(d,{value:"unread",children:"ì•ˆì½ìŒ"}),e.jsx(d,{value:"read",children:"ì½ìŒ"})]})]})]}),ie?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(ye,{})}):e.jsx(ge,{data:ce,columns:ve,enableSearch:!1})]})]})]})}export{Ee as MessageCenter,Ee as default};
