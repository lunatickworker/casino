import{k as W,r as i,aA as X,t as n,s as Y,j as e,aV as g,U as Z,I as F,w as p,B as y,C as L,e as J}from"./index-DHLZKrSC.js";import{L as V,G as Q}from"./GameProviderSelector-DRedagCK.js";import{S as U,I as $}from"./ImageWithFallback-LZwIUSHl.js";import{g as v,S as O}from"./gameApi-B-uxUVra.js";import{T as D}from"./trophy-DlkZw1ZH.js";import{S as K}from"./search-DGG3ycOS.js";import{T as ee}from"./target-BtFOR7Pr.js";import{Z as ae}from"./zap-BfJZsiTG.js";import{P as E}from"./play-BOvH0EtP.js";import{C as se}from"./clock-DJz0fDvN.js";import"./scroll-area-BAJXbkC5.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"M16 8h.01",key:"cr5u4v"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M8 8h.01",key:"1e4136"}],["path",{d:"M8 12h.01",key:"czm47f"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],re=W("dice-6",te),le=[{id:"all",name:"ì „ì²´",icon:g,gradient:"from-yellow-500 to-amber-600"},{id:"evolution",name:"ì—ë³¼ë£¨ì…˜",icon:ee,gradient:"from-red-500 to-red-600"},{id:"pragmatic",name:"í”„ë¼ê·¸ë§ˆí‹±",icon:ae,gradient:"from-blue-500 to-blue-600"},{id:"baccarat",name:"ë°”ì¹´ë¼",icon:U,gradient:"from-purple-500 to-purple-600"},{id:"blackjack",name:"ë¸”ëž™ìž­",icon:re,gradient:"from-green-500 to-green-600"},{id:"roulette",name:"ë£°ë ›",icon:D,gradient:"from-orange-500 to-orange-600"}];function ye({user:d,onRouteChange:ie}){const[c,w]=i.useState("all"),[u,b]=i.useState("all"),[m,j]=i.useState(""),[A,T]=i.useState([]),[N,_]=i.useState([]),[q,B]=i.useState([]),[k,h]=i.useState(!1),[x,I]=i.useState(null),{sendMessage:C,isConnected:S}=X();i.useEffect(()=>{H()},[]),i.useEffect(()=>{S&&C({type:"subscribe",channel:"casino_status_updates",userId:d.id})},[S,d.id]),i.useEffect(()=>{f()},[c,u]);const H=async()=>{try{h(!0);let s=(await v.getProviders()).filter(t=>t.type==="casino");s.length<10&&(s=[{id:410,name:"ì—ë³¼ë£¨ì…˜ ê²Œì´ë°",type:"casino",status:"active"},{id:77,name:"ë§ˆì´í¬ë¡œ ê²Œì´ë°",type:"casino",status:"active"},{id:2,name:"Vivo ê²Œì´ë°",type:"casino",status:"active"},{id:30,name:"ì•„ì‹œì•„ ê²Œì´ë°",type:"casino",status:"active"},{id:78,name:"í”„ë¼ê·¸ë§ˆí‹±í”Œë ˆì´",type:"casino",status:"active"},{id:86,name:"ì„¹ì‹œê²Œì´ë°",type:"casino",status:"active"},{id:11,name:"ë¹„ë¹„ì•„ì´ì—”",type:"casino",status:"active"},{id:28,name:"ë“œë¦¼ê²Œìž„",type:"casino",status:"active"},{id:89,name:"ì˜¤ë¦¬ì—”íƒˆê²Œìž„",type:"casino",status:"active"},{id:91,name:"ë³´íƒ€",type:"casino",status:"active"},{id:44,name:"ì´ì£¼ê¸°",type:"casino",status:"active"},{id:85,name:"í”Œë ˆì´í… ë¼ì´ë¸Œ",type:"casino",status:"active"},{id:0,name:"ì œë„¤ëŸ´ ì¹´ì§€ë…¸",type:"casino",status:"active"}]),B(s),await f()}catch{n.error("ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}finally{h(!1)}},f=async()=>{try{h(!0);let a;try{a=await v.getUserVisibleGames(d.id,"casino",c!=="all"?parseInt(c):void 0,void 0,100,0)}catch(r){console.error("RPC í•¨ìˆ˜ í˜¸ì¶œ ì‹¤íŒ¨, ì§ì ‘ ì¡°íšŒë¡œ fallback:",r);let l=Y.from("games").select(`
            id,
            provider_id,
            name,
            type,
            status,
            image_url,
            demo_available,
            is_featured,
            priority,
            rtp,
            play_count,
            created_at,
            updated_at,
            game_providers!inner(
              id,
              name,
              type
            )
          `).eq("type","casino").eq("status","visible").eq("game_providers.status","active");c!=="all"&&(l=l.eq("provider_id",parseInt(c)));const{data:R,error:M}=await l.order("priority",{ascending:!1}).limit(100);if(M)throw M;a=R?.map(o=>({game_id:o.id,provider_id:o.provider_id,provider_name:o.game_providers.name,game_name:o.name,game_type:o.type,image_url:o.image_url,is_featured:o.is_featured,status:o.status,priority:o.priority||0}))||[]}const s=a.sort((r,l)=>r.is_featured&&!l.is_featured?-1:!r.is_featured&&l.is_featured?1:l.priority-r.priority);T(s);const t=s.filter(r=>r.is_featured).slice(0,3);if(t.length<3){const r=s.filter(l=>!l.is_featured).slice(0,3-t.length);_([...t,...r])}else _(t)}catch(a){console.error("âŒ ì¹´ì§€ë…¸ ê²Œìž„ ë¡œë“œ ì‹¤íŒ¨:",a),n.error("ì¹´ì§€ë…¸ ê²Œìž„ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}finally{h(!1)}},G=async a=>{if(x!==a.game_id){I(a.game_id);try{console.log("ðŸŽ® ì¹´ì§€ë…¸ ê²Œìž„ ì‹¤í–‰ ì‹œìž‘:",{userId:d.id,gameId:a.game_id,gameName:a.game_name});const s=await v.generateGameLaunchUrl(d.id,a.game_id);if(console.log("ðŸŽ® ì¹´ì§€ë…¸ ê²Œìž„ ì‹¤í–‰ ê²°ê³¼:",s),s.success&&s.launchUrl){const t=s.sessionId,r=window.open(s.launchUrl,"_blank","width=1920,height=1080,scrollbars=yes,resizable=yes,fullscreen=yes");r?(n.success(`${a.game_name} VIP ì¹´ì§€ë…¸ì— ìž…ìž¥í–ˆìŠµë‹ˆë‹¤.`),C({type:"casino_entered",userId:d.id,gameId:a.game_id,providerName:a.provider_name,sessionId:t,timestamp:new Date().toISOString()}),t&&setTimeout(()=>{const l=setInterval(()=>{r.closed&&(clearInterval(l),console.log("ðŸŽ® ì¹´ì§€ë…¸ ê²Œìž„ ì°½ ì¢…ë£Œ ê°ì§€"),setTimeout(()=>{window.syncBalanceAfterGame?.(t)},3e3))},2e3)},1e4)):(n.error("íŒì—…ì´ ì°¨ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤. íŒì—… í—ˆìš© í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”."),t&&typeof t=="number"?window.endGameSession?.(t):console.warn("âš ï¸ ê²Œìž„ ì‹¤í–‰ ì‹¤íŒ¨, í•˜ì§€ë§Œ sessionIdê°€ ì—†ìŒ:",t))}else n.dismiss(`game-loading-${a.game_id}`),console.error("âŒ ì¹´ì§€ë…¸ ê²Œìž„ ì‹¤í–‰ ì‹¤íŒ¨:",s.error),n.error(`ì¹´ì§€ë…¸ ìž…ìž¥ ì‹¤íŒ¨: ${s.error||"ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."}`)}catch(s){n.dismiss(`game-loading-${a.game_id}`),console.error("âŒ ì¹´ì§€ë…¸ ì‹¤í–‰ ì˜ˆì™¸ ë°œìƒ:",s),n.error(`ì¹´ì§€ë…¸ ìž…ìž¥ ì¤‘ ì˜¤ë¥˜: ${s instanceof Error?s.message:"ì‹œìŠ¤í…œ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."}`)}finally{I(null)}}},P=a=>a.image_url&&a.image_url.trim()&&a.image_url!=="null"?a.image_url:null,z=A.filter(a=>{const s=m===""||a.game_name.toLowerCase().includes(m.toLowerCase())||a.provider_name.toLowerCase().includes(m.toLowerCase());let t=!0;if(u!=="all"){const r=a.game_name.toLowerCase(),l=a.provider_name.toLowerCase();switch(u){case"evolution":t=l.includes("evolution")||l.includes("ì—ë³¼ë£¨ì…˜");break;case"pragmatic":t=l.includes("pragmatic")||l.includes("í”„ë¼ê·¸ë§ˆí‹±");break;case"baccarat":t=r.includes("baccarat")||r.includes("ë°”ì¹´ë¼");break;case"blackjack":t=r.includes("blackjack")||r.includes("ë¸”ëž™ìž­")||r.includes("black jack");break;case"roulette":t=r.includes("roulette")||r.includes("ë£°ë ›");break;default:t=!0}}return s&&t});return e.jsxs("div",{className:"relative min-h-screen overflow-x-hidden",children:[e.jsx("div",{className:"absolute inset-0 z-0",style:{backgroundImage:"linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.8)), url('https://images.unsplash.com/photo-1680191741548-1a9321688cc3?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxsdXh1cnklMjBjYXNpbm8lMjBpbnRlcmlvciUyMGJhY2tncm91bmR8ZW58MXx8fHwxNzU5NzIwMzYzfDA&ixlib=rb-4.1.0&q80&w=1080&utm_source=figma&utm_medium=referral')",backgroundSize:"cover",backgroundPosition:"center",backgroundAttachment:"fixed"}}),e.jsxs("div",{className:"relative z-10 space-y-8 p-4 sm:p-6 lg:p-8",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[e.jsx(g,{className:"w-12 h-12 text-yellow-400 drop-shadow-[0_0_20px_rgba(250,204,21,0.8)]"}),e.jsx("h1",{className:"text-5xl lg:text-6xl font-bold gold-text neon-glow",children:"VIP ë¼ì´ë¸Œ ì¹´ì§€ë…¸"}),e.jsx(g,{className:"w-12 h-12 text-yellow-400 drop-shadow-[0_0_20px_rgba(250,204,21,0.8)]"})]}),e.jsx("p",{className:"text-2xl text-yellow-100 tracking-wide",children:"ì„¸ê³„ ìµœê³ ì˜ ë”œëŸ¬ì™€ í•¨ê»˜í•˜ëŠ” í”„ë¦¬ë¯¸ì—„ ê²Œìž„ ê²½í—˜"}),e.jsxs("div",{className:"flex items-center justify-center gap-4 text-yellow-300/80",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse"}),e.jsx("span",{children:"ì‹¤ì‹œê°„ ë¼ì´ë¸Œ"})]}),e.jsx("div",{className:"w-px h-4 bg-yellow-600/50"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"w-4 h-4"}),e.jsx("span",{children:"24ì‹œê°„ ìš´ì˜"})]}),e.jsx("div",{className:"w-px h-4 bg-yellow-600/50"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"w-4 h-4"}),e.jsx("span",{children:"VIP ì „ìš©"})]})]})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-center justify-between",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(K,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-yellow-400"}),e.jsx(F,{type:"text",placeholder:"ê²Œìž„ ê²€ìƒ‰...",value:m,onChange:a=>j(a.target.value),className:"pl-10 bg-black/50 border-yellow-600/30 text-white placeholder:text-yellow-200/50 focus:border-yellow-500"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:le.map(a=>{const s=a.icon,t=u===a.id;return e.jsxs(p,{variant:"ghost",onClick:()=>b(a.id),className:`
                    relative px-4 py-2 text-sm font-semibold transition-all duration-300
                    ${t?`bg-gradient-to-r ${a.gradient} text-white shadow-lg shadow-yellow-500/50`:"text-yellow-200/80 hover:text-yellow-100 hover:bg-yellow-900/20 border border-transparent hover:border-yellow-600/30"}
                  `,children:[e.jsx(s,{className:"w-4 h-4 mr-2"}),a.name,t&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-transparent via-yellow-300 to-transparent"})]},a.id)})})]}),N.length>0&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:N.map((a,s)=>{const t=["from-purple-600/80 to-pink-600/80","from-red-600/80 to-orange-600/80","from-green-600/80 to-emerald-600/80"];return e.jsx("div",{className:"relative group cursor-pointer overflow-hidden rounded-2xl luxury-card border-2 border-yellow-600/40 game-card-hover",onClick:()=>G(a),children:e.jsxs("div",{className:"aspect-[16/10] relative",children:[e.jsx($,{src:P(a),alt:a.game_name,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"}),e.jsx("div",{className:`absolute inset-0 bg-gradient-to-t ${t[s%3]} transition-opacity duration-300`}),e.jsxs("div",{className:"absolute inset-0 flex flex-col justify-end p-6 text-white",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(y,{className:"vip-badge text-white px-3 py-1 w-fit",children:[e.jsx(U,{className:"w-3 h-3 mr-1"}),"VIP ì¶”ì²œ"]}),e.jsx("h3",{className:"text-2xl font-bold neon-glow",children:a.game_name}),e.jsx("p",{className:"text-lg text-yellow-100",children:a.provider_name})]}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors duration-300 flex items-center justify-center",children:x===a.game_id?e.jsxs("div",{className:"flex flex-col items-center gap-2 text-white",children:[e.jsx(V,{className:"w-8 h-8 animate-spin"}),e.jsx("span",{className:"text-sm font-semibold",children:"ìž…ìž¥ ì¤‘..."})]}):e.jsxs(p,{size:"lg",className:"opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-gradient-to-r from-yellow-600 to-yellow-500 hover:from-yellow-500 hover:to-yellow-400 text-black font-bold shadow-lg",children:[e.jsx(E,{className:"w-5 h-5 mr-2"}),"VIP ìž…ìž¥"]})})]})]})},a.game_id)})}),e.jsx("div",{className:"luxury-card rounded-2xl p-6 border-2 border-yellow-600/20",children:e.jsx(Q,{selectedProvider:c,onProviderChange:w,gameType:"casino",providers:q})}),k?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:Array.from({length:8}).map((a,s)=>e.jsxs(L,{className:"luxury-card animate-pulse border-yellow-600/20",children:[e.jsx("div",{className:"aspect-[4/3] bg-gradient-to-br from-slate-700 to-slate-800 rounded-t-xl"}),e.jsxs(J,{className:"p-4 space-y-3",children:[e.jsx("div",{className:"h-5 bg-gradient-to-r from-yellow-600/20 to-yellow-400/20 rounded"}),e.jsx("div",{className:"h-4 bg-gradient-to-r from-yellow-600/20 to-yellow-400/20 rounded w-2/3"})]})]},s))}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:z.map(a=>e.jsx(L,{className:`luxury-card group cursor-pointer border-2 border-yellow-600/20 hover:border-yellow-500/60 transition-all game-card-hover overflow-hidden ${x===a.game_id?"opacity-50":""}`,onClick:()=>G(a),children:e.jsxs("div",{className:"aspect-[4/3] relative overflow-hidden",children:[e.jsx($,{src:P(a),alt:a.game_name,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent"}),e.jsx("div",{className:"absolute top-3 left-3",children:e.jsxs(y,{className:"bg-red-500 text-white border-0 animate-pulse shadow-lg",children:[e.jsx("div",{className:"w-2 h-2 bg-white rounded-full mr-1"}),"LIVE"]})}),a.is_featured&&e.jsx("div",{className:"absolute top-3 right-3",children:e.jsxs(y,{className:"vip-badge text-white border-0",children:[e.jsx(O,{className:"w-3 h-3 mr-1"}),"VIP"]})}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/40 transition-all duration-300 flex items-center justify-center",children:x===a.game_id?e.jsxs("div",{className:"flex flex-col items-center gap-2 text-white",children:[e.jsx(V,{className:"w-8 h-8 animate-spin"}),e.jsx("span",{className:"text-sm font-semibold",children:"ìž…ìž¥ ì¤‘..."})]}):e.jsxs(p,{size:"lg",className:"opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-gradient-to-r from-yellow-600 to-amber-600 hover:from-yellow-500 hover:to-amber-500 text-black font-bold shadow-lg shadow-yellow-500/40",disabled:x===a.game_id,children:[e.jsx(E,{className:"w-5 h-5 mr-2"}),"VIP ìž…ìž¥"]})}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4 text-white",children:[e.jsx("h3",{className:"font-bold text-lg mb-1 truncate neon-glow",children:a.game_name}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm text-yellow-300 truncate",children:a.provider_name}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-green-400",children:[e.jsx(se,{className:"w-3 h-3"}),e.jsx("span",{children:"24H"})]})]})]})]})},a.game_id))}),z.length===0&&!k&&e.jsxs("div",{className:"text-center py-16 luxury-card rounded-2xl border-2 border-yellow-600/20",children:[e.jsx("div",{className:"mx-auto w-24 h-24 bg-gradient-to-br from-yellow-500/20 to-amber-600/20 rounded-full flex items-center justify-center mb-6",children:e.jsx(g,{className:"w-12 h-12 text-yellow-400"})}),e.jsx("h3",{className:"text-2xl font-bold gold-text mb-2",children:"ê²Œìž„ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤"}),e.jsx("p",{className:"text-yellow-200/80 text-lg mb-4",children:m?`"${m}"ì— ëŒ€í•œ ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.`:u!=="all"?"ì„ íƒí•œ ì¹´í…Œê³ ë¦¬ì˜ ê²Œìž„ì´ ì—†ìŠµë‹ˆë‹¤.":c!=="all"?"ì„ íƒí•œ ì œê³µì‚¬ì˜ ê²Œìž„ì´ ì—†ìŠµë‹ˆë‹¤.":"ì‚¬ìš© ê°€ëŠ¥í•œ ì¹´ì§€ë…¸ ê²Œìž„ì´ ì—†ìŠµë‹ˆë‹¤."}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsx(p,{variant:"outline",onClick:()=>{j(""),b("all"),w("all")},className:"border-yellow-600/30 text-yellow-300 hover:bg-yellow-900/20",children:"ì „ì²´ ê²Œìž„ ë³´ê¸°"}),e.jsx(p,{variant:"outline",onClick:()=>f(),className:"border-yellow-600/30 text-yellow-300 hover:bg-yellow-900/20",children:"ìƒˆë¡œê³ ì¹¨"})]})]})]})]})}export{ye as UserCasino};
