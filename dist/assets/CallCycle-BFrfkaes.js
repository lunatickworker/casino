import{k as E,r as j,j as e,aa as R,a4 as B,a7 as f,a8 as b,C as p,a as _,b as v,e as y,w as C,R as L,d as w,E as r,I as l,aG as k,B as u,ay as T,t as h}from"./index-DBZ0Cn5g.js";import{S as D}from"./switch-u0nzMJtl.js";import{C as I}from"./circle-alert-Sb-Y6Jzy.js";import{P as F}from"./play-C8xm3kJ3.js";import{C as M}from"./clock-C3RDg2t7.js";import{Z as $}from"./zap-BG8k_k7D.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],A=E("pause",U);var Z="Separator",P="horizontal",G=["horizontal","vertical"],S=j.forwardRef((i,a)=>{const{decorative:o,orientation:c=P,...g}=i,x=H(c)?c:P,N=o?{role:"none"}:{"aria-orientation":x==="vertical"?x:void 0,role:"separator"};return e.jsx(R.div,{"data-orientation":x,...N,...g,ref:a})});S.displayName=Z;function H(i){return G.includes(i)}var V=S;function q({className:i,orientation:a="horizontal",decorative:o=!0,...c}){return e.jsx(V,{"data-slot":"separator-root",decorative:o,orientation:a,className:B("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",i),...c})}function ee({user:i}){const[a,o]=j.useState({balance_sync_interval:30,game_history_interval:60,user_status_interval:120,betting_sync_interval:45,auto_settlement_enabled:!0,settlement_interval:300,api_timeout:30,max_retry_count:3}),[c,g]=j.useState({balance_sync:{status:"running",last_run:"2024-01-20 14:30:15",next_run:"2024-01-20 14:31:15"},game_history:{status:"running",last_run:"2024-01-20 14:29:45",next_run:"2024-01-20 14:30:45"},user_status:{status:"paused",last_run:"2024-01-20 14:28:30",next_run:"2024-01-20 14:30:30"},betting_sync:{status:"running",last_run:"2024-01-20 14:30:00",next_run:"2024-01-20 14:30:45"},settlement:{status:"running",last_run:"2024-01-20 14:25:00",next_run:"2024-01-20 14:30:00"}}),[x,m]=j.useState(!1);if(!(i.level<=2))return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h1",{children:"API 호출 주기 관리"})}),e.jsxs(f,{children:[e.jsx(I,{className:"h-4 w-4"}),e.jsx(b,{children:"이 기능은 시스템관리자 및 대본사만 접근할 수 있습니다."})]})]});const n=async(s,t)=>{m(!0);try{o(d=>({...d,[s]:t})),h.success("설정이 업데이트되었습니다.")}catch{h.error("설정 업데이트에 실패했습니다.")}finally{m(!1)}},z=async(s,t)=>{m(!0);try{g(d=>({...d,[s]:{...d[s],status:t==="start"?"running":"paused"}})),h.success(`${s} 주기가 ${t==="start"?"시작":"중지"}되었습니다.`)}catch{h.error("작업 실행에 실패했습니다.")}finally{m(!1)}},O=s=>{switch(s){case"running":return e.jsxs(u,{className:"bg-green-600",children:[e.jsx(T,{className:"h-3 w-3 mr-1"}),"실행중"]});case"paused":return e.jsxs(u,{variant:"secondary",children:[e.jsx(A,{className:"h-3 w-3 mr-1"}),"중지됨"]});case"error":return e.jsxs(u,{variant:"destructive",children:[e.jsx(I,{className:"h-3 w-3 mr-1"}),"오류"]});default:return e.jsx(u,{variant:"outline",children:"알 수 없음"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{children:"API 호출 주기 관리"}),e.jsx("p",{className:"text-muted-foreground",children:"Invest API와의 동기화 주기를 설정하고 관리합니다."})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(c).map(([s,t])=>e.jsxs(p,{children:[e.jsx(_,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(v,{className:"text-sm font-medium",children:[s==="balance_sync"&&"잔고 동기화",s==="game_history"&&"게임 기록",s==="user_status"&&"사용자 상태",s==="betting_sync"&&"베팅 동기화",s==="settlement"&&"정산 처리"]}),O(t.status)]})}),e.jsxs(y,{className:"space-y-2",children:[e.jsxs("div",{className:"text-xs text-muted-foreground",children:["마지막 실행: ",t.last_run]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["다음 실행: ",t.next_run]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(C,{size:"sm",variant:"outline",onClick:()=>z(s,t.status==="running"?"stop":"start"),disabled:x,children:t.status==="running"?e.jsxs(e.Fragment,{children:[e.jsx(A,{className:"h-3 w-3 mr-1"}),"중지"]}):e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"h-3 w-3 mr-1"}),"시작"]})}),e.jsx(C,{size:"sm",variant:"ghost",children:e.jsx(L,{className:"h-3 w-3"})})]})]})]},s))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(p,{children:[e.jsxs(_,{children:[e.jsxs(v,{className:"flex items-center gap-2",children:[e.jsx(M,{className:"h-5 w-5"}),"동기화 간격 설정"]}),e.jsx(w,{children:"각 API 호출의 간격을 초 단위로 설정합니다."})]}),e.jsxs(y,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"잔고 동기화 (초)"}),e.jsx(l,{type:"number",value:a.balance_sync_interval,onChange:s=>n("balance_sync_interval",parseInt(s.target.value)),min:"10",max:"300"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"권장: 30초 이상"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"게임 기록 동기화 (초)"}),e.jsx(l,{type:"number",value:a.game_history_interval,onChange:s=>n("game_history_interval",parseInt(s.target.value)),min:"30",max:"600"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"권장: 60초 이상"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"사용자 상태 확인 (초)"}),e.jsx(l,{type:"number",value:a.user_status_interval,onChange:s=>n("user_status_interval",parseInt(s.target.value)),min:"60",max:"3600"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"베팅 동기화 (초)"}),e.jsx(l,{type:"number",value:a.betting_sync_interval,onChange:s=>n("betting_sync_interval",parseInt(s.target.value)),min:"15",max:"300"})]})]})]}),e.jsxs(p,{children:[e.jsxs(_,{children:[e.jsxs(v,{className:"flex items-center gap-2",children:[e.jsx(k,{className:"h-5 w-5"}),"고급 설정"]}),e.jsx(w,{children:"API 타임아웃 및 재시도 정책을 설정합니다."})]}),e.jsxs(y,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{children:"자동 정산 활성화"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"일정 시간마다 자동으로 정산을 처리합니다."})]}),e.jsx(D,{checked:a.auto_settlement_enabled,onCheckedChange:s=>n("auto_settlement_enabled",s)})]}),a.auto_settlement_enabled&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"정산 간격 (초)"}),e.jsx(l,{type:"number",value:a.settlement_interval,onChange:s=>n("settlement_interval",parseInt(s.target.value)),min:"60",max:"3600"})]}),e.jsx(q,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"API 타임아웃 (초)"}),e.jsx(l,{type:"number",value:a.api_timeout,onChange:s=>n("api_timeout",parseInt(s.target.value)),min:"10",max:"120"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{children:"최대 재시도 횟수"}),e.jsx(l,{type:"number",value:a.max_retry_count,onChange:s=>n("max_retry_count",parseInt(s.target.value)),min:"1",max:"10"})]})]})]})]}),e.jsxs(f,{children:[e.jsx($,{className:"h-4 w-4"}),e.jsxs(b,{children:[e.jsx("strong",{children:"주의사항:"})," API 호출 간격을 너무 짧게 설정하면 서버에 부하를 줄 수 있습니다. 잔고 동기화는 최소 30초, 게임 기록은 최소 60초 간격을 권장합니다."]})]})]})}export{ee as CallCycle,ee as default};
